!function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),console.log("Home"),this.controller=new ScrollMagic.Controller,this.animation(),this.slider()}return o(e,[{key:"slider",value:function(){$("#slider-home").responsiveSlides({manualControls:"#slider-pagination",timeout:6e3,auto:!0,before:function(e){this.hometitle=$(".home-content h2").eq(e),TweenLite.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4)}})}},{key:"animation",value:function(){this.homearea=new TimelineMax,this.projectarea=new TimelineMax,this.skillarea=new TimelineMax,this.hometitle=document.querySelector(".home-content h2"),this.projectitem=document.querySelectorAll(".grid-item"),this.skillitem=document.querySelectorAll(".skill-item"),this.homearea.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4),this.projectarea.staggerFromTo(this.projectitem,.2,{scale:0,y:20},{scale:1,y:0},.2),this.skillarea.staggerFromTo(this.skillitem,.2,{opacity:0,x:-20},{opacity:1,x:0},.2);new ScrollMagic.Scene({triggerElement:"#home",reverse:!1}).setTween(this.homearea).addTo(this.controller),new ScrollMagic.Scene({triggerElement:"#projects",reverse:!1}).setTween(this.projectarea).addTo(this.controller),new ScrollMagic.Scene({triggerElement:"#projects",reverse:!1}).setTween(this.skillarea).addTo(this.controller)}}]),e}();n["default"]=r},{}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("../tools/DeviceInfo"),s=i(a),l=e("../partials/Header"),c=i(l),u=e("../partials/Footer"),f=i(u),d=e("./Home"),h=i(d),m=e("./Single"),p=i(m),g=function(){function e(){o(this,e),console.log("init"),this.ready()}return r(e,[{key:"ready",value:function(){switch(s["default"].check(),s["default"].isTouch&&document.body.classList.add("touch"),s["default"].isIE&&document.body.classList.add("ie"),s["default"].isAndroid&&document.body.classList.add("android"),s["default"].isIOS&&document.body.classList.add("ios"),s["default"].isFirefox&&document.body.classList.add("firefox"),s["default"].isSafari&&document.body.classList.add("safari"),s["default"].isChrome&&document.body.classList.add("chrome"),this.header=new c["default"],this.footer=new f["default"],$("body section").attr("data-template")){case"home":this.page=new h["default"];break;case"single":this.page=new p["default"]}}}]),e}();new g},{"../partials/Footer":4,"../partials/Header":5,"../tools/DeviceInfo":6,"./Home":1,"./Single":3}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),console.log("Single"),this.panel=document.getElementById("panel"),this.controller=new ScrollMagic.Controller,this.animationsingle=this.animationsingle.bind(this),this.animationsingle(),this.slider=this.slider.bind(this),this.slider()}return o(e,[{key:"slider",value:function(){$("#slider-single").responsiveSlides({manualControls:"#slider-pagination",timeout:6e3,auto:!0,before:function(e){this.hometitle=$(".slider-content h2").eq(e),TweenLite.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4)}})}},{key:"animationsingle",value:function(){this.panelarea=new TimelineMax,this.panel=document.querySelector("#panel"),this.elements=document.querySelectorAll("#panel .elem"),this.panelarea.fromTo(this.panel,1,{opacity:0,x:40},{opacity:1,x:0},{ease:"Cubic.easeOut"}),this.panelarea.staggerFromTo(this.elements,.5,{opacity:0,y:-40},{opacity:1,y:0},.2);new ScrollMagic.Scene({triggerElement:"#main",reverse:!1}).setTween(this.panelarea).addTo(this.controller)}}]),e}();n["default"]=r},{}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function r(){i(this,r),console.log("Footer")};n["default"]=o},{}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),console.log("Header"),this.hamburger=document.getElementById("hamburger"),this.anchor=document.querySelectorAll(".menu-item > a");for(var t=0;t<this.anchor.length;t++)this.anchor[t].addEventListener("click",this.anchorJump.bind(this));this.menuresize=this.menuresize.bind(this),this.menuresize(),window.addEventListener("scroll",this.menuresize.bind(this)),window.addEventListener("scroll",this.activeOnScroll.bind(this)),this.hamburger.addEventListener("click",this.togglemenumobile.bind(this)),this.click=!1}return o(e,[{key:"menuresize",value:function(){var e=100;this.nav=document.getElementById("masthead"),window.pageYOffset>e&&this.nav.classList.add("small"),window.pageYOffset<=e&&this.nav.classList.remove("small")}},{key:"anchorJump",value:function(e){console.log(home);var t=document.body.classList.contains("single");t?window.location.href=home+e.target.hash:(e.preventDefault(),$("html, body").animate({scrollTop:$(e.target.hash).offset().top-44},500))}},{key:"activeOnScroll",value:function(){for(var e=window.pageYOffset,t=document.querySelectorAll(".section"),n=0;n<t.length;n++){var i=t[n].getAttribute("id"),o=document.getElementById(i);if(null!=o){var r=$(o).position().top-100;e>=r&&($("#navbar ul li.active").removeClass("active"),$("#navbar ul li."+i).addClass("active"))}}}},{key:"togglemenumobile",value:function(e){this.click?(TweenLite.to(this.panel,0,{className:"-=open",css:"transform: translateX(-100%)"}),this.click=!1):(TweenLite.to(this.panel,0,{className:"+=open",css:"transform: translateX(-100%)"}),this.click=!0)}}]),e}();n["default"]=r},{}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e)}return o(e,null,[{key:"check",value:function(){e.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,e.isChrome=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,e.isSafari=navigator.userAgent.toLowerCase().indexOf("chrome")<=-1&&navigator.userAgent.toLowerCase().indexOf("safari")>-1,e.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>-1,e.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e.isIE=-1!=e.getInternetExplorerVersion();try{document.createEvent("TouchEvent"),e.isTouch=!0}catch(t){e.isTouch=!1}}},{key:"getInternetExplorerVersion",value:function(){var e=-1,t=null,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&(e=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&(e=parseFloat(RegExp.$1))),e}}]),e}();n["default"]=r},{}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC5qcyIsInNyYy9qcy9jdXN0b20vSG9tZS5qcyIsInNyYy9qcy9jdXN0b20vTWFpbi5qcyIsInNyYy9qcy9jdXN0b20vU2luZ2xlLmpzIiwic3JjL2pzL3BhcnRpYWxzL0Zvb3Rlci5qcyIsInNyYy9qcy9wYXJ0aWFscy9IZWFkZXIuanMiLCJzcmMvanMvdG9vbHMvRGV2aWNlSW5mby5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJIb21lIiwidGhpcyIsImNvbnNvbGUiLCJsb2ciLCJjb250cm9sbGVyIiwiU2Nyb2xsTWFnaWMiLCJDb250cm9sbGVyIiwiYW5pbWF0aW9uIiwic2xpZGVyIiwiJCIsInJlc3BvbnNpdmVTbGlkZXMiLCJtYW51YWxDb250cm9scyIsInRpbWVvdXQiLCJhdXRvIiwiYmVmb3JlIiwiaW5kZXgiLCJob21ldGl0bGUiLCJlcSIsIlR3ZWVuTGl0ZSIsImZyb21UbyIsIm9wYWNpdHkiLCJ5IiwiaG9tZWFyZWEiLCJUaW1lbGluZU1heCIsInByb2plY3RhcmVhIiwic2tpbGxhcmVhIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvamVjdGl0ZW0iLCJxdWVyeVNlbGVjdG9yQWxsIiwic2tpbGxpdGVtIiwic3RhZ2dlckZyb21UbyIsInNjYWxlIiwieCIsIlNjZW5lIiwidHJpZ2dlckVsZW1lbnQiLCJyZXZlcnNlIiwic2V0VHdlZW4iLCJhZGRUbyIsIjIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfRGV2aWNlSW5mbyIsIl9EZXZpY2VJbmZvMiIsIl9IZWFkZXIiLCJfSGVhZGVyMiIsIl9Gb290ZXIiLCJfRm9vdGVyMiIsIl9Ib21lIiwiX0hvbWUyIiwiX1NpbmdsZSIsIl9TaW5nbGUyIiwiTWFpbiIsInJlYWR5IiwiY2hlY2siLCJpc1RvdWNoIiwiYm9keSIsImNsYXNzTGlzdCIsImFkZCIsImlzSUUiLCJpc0FuZHJvaWQiLCJpc0lPUyIsImlzRmlyZWZveCIsImlzU2FmYXJpIiwiaXNDaHJvbWUiLCJoZWFkZXIiLCJmb290ZXIiLCJhdHRyIiwicGFnZSIsIi4uL3BhcnRpYWxzL0Zvb3RlciIsIi4uL3BhcnRpYWxzL0hlYWRlciIsIi4uL3Rvb2xzL0RldmljZUluZm8iLCIuL0hvbWUiLCIuL1NpbmdsZSIsIjMiLCJTaW5nbGUiLCJwYW5lbCIsImdldEVsZW1lbnRCeUlkIiwiYW5pbWF0aW9uc2luZ2xlIiwiYmluZCIsInBhbmVsYXJlYSIsImVsZW1lbnRzIiwiZWFzZSIsIjQiLCJGb290ZXIiLCI1IiwiSGVhZGVyIiwiaGFtYnVyZ2VyIiwiYW5jaG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFuY2hvckp1bXAiLCJtZW51cmVzaXplIiwid2luZG93IiwiYWN0aXZlT25TY3JvbGwiLCJ0b2dnbGVtZW51bW9iaWxlIiwiY2xpY2siLCJzdGFydCIsIm5hdiIsInBhZ2VZT2Zmc2V0IiwicmVtb3ZlIiwiZXZlbnQiLCJob21lIiwiY29udGFpbnMiLCJsb2NhdGlvbiIsImhyZWYiLCJoYXNoIiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwicG9zIiwic2VjdGlvbnMiLCJpZCIsImdldEF0dHJpYnV0ZSIsInNlY3QiLCJzZWN0cG9zIiwicG9zaXRpb24iLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwidG8iLCJjbGFzc05hbWUiLCJjc3MiLCI2IiwiRGV2aWNlSW5mbyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsInRlc3QiLCJNU1N0cmVhbSIsImdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uIiwiY3JlYXRlRXZlbnQiLCJydiIsInJlIiwidWEiLCJhcHBOYW1lIiwiUmVnRXhwIiwiZXhlYyIsInBhcnNlRmxvYXQiLCIkMSJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsR0FBQUUsR0FBQSxrQkFBQUMsVUFBQUEsT0FBQSxLQUFBRixHQUFBQyxFQUFBLE1BQUFBLEdBQUFGLEdBQUEsRUFBQSxJQUFBSSxFQUFBLE1BQUFBLEdBQUFKLEdBQUEsRUFBQSxJQUFBSyxHQUFBLEdBQUFDLE9BQUEsdUJBQUFOLEVBQUEsSUFBQSxNQUFBSyxHQUFBRSxLQUFBLG1CQUFBRixFQUFBLEdBQUFHLEdBQUFYLEVBQUFHLElBQUFTLFdBQUFiLEdBQUFJLEdBQUEsR0FBQVUsS0FBQUYsRUFBQUMsUUFBQSxTQUFBZCxHQUFBLEdBQUFFLEdBQUFELEVBQUFJLEdBQUEsR0FBQUwsRUFBQSxPQUFBSSxHQUFBRixFQUFBQSxFQUFBRixJQUFBYSxFQUFBQSxFQUFBQyxRQUFBZCxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLE1BQUFELEdBQUFHLEdBQUFTLFFBQUEsSUFBQSxHQUFBTCxHQUFBLGtCQUFBRCxVQUFBQSxRQUFBSCxFQUFBLEVBQUFBLEVBQUFGLEVBQUFhLE9BQUFYLElBQUFELEVBQUFELEVBQUFFLEdBQUEsT0FBQUQsS0FBQWEs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QVc2RCxVQUFVQyxVQUFVQyxjQUFjQyxRQUFRLFVBQVksR0FDNUVKLEVBQVc3RCxTQUFXOEQsVUFBVUMsVUFBVUMsY0FBY0MsUUFBUSxXQUFhLElBQU1ILFVBQVVDLFVBQVVDLGNBQWNDLFFBQVEsVUFBWSxHQUN6SUosRUFBV2hFLFVBQVlpRSxVQUFVQyxVQUFVQyxjQUFjQyxRQUFRLFdBQWEsR0FDOUVKLEVBQVcvRCxNQUFRLG1CQUFtQm9FLEtBQUtKLFVBQVVDLGFBQWVsQyxPQUFPc0MsU0FHM0VOLEVBQVdqRSxLQUFrRCxJQUEzQ2lFLEVBQVdPLDRCQUc3QixLQUNVM0csU0FBUzRHLFlBQVksY0FDckJSLEVBQVdyRSxTQUFVLEVBRXZCLE1BQU8vRixHQUNMb0ssRUFBV3JFLFNBQVUsTU55VDdCN0QsSUFBSyw2QkFDTFQsTUFBTyxXTW5USixHQUFJb0osR0FBSyxHQUNMQyxFQUFLLEtBQ0ZDLEVBQUtWLFVBQVVDLFNBZ0IzQixPQWR5QiwrQkFBckJELFVBQVVXLFNBR2JGLEVBQU0sR0FBSUcsUUFBTyw4QkFFRyxPQUFoQkgsRUFBR0ksS0FBS0gsS0FBY0YsRUFBS00sV0FBWUYsT0FBT0csTUFFbkIsWUFBckJmLFVBQVVXLFVBRXBCRixFQUFNLEdBQUlHLFFBQU8sc0NBRUcsT0FBaEJILEVBQUdJLEtBQUtILEtBQWNGLEVBQUtNLFdBQVlGLE9BQU9HLE1BRzVDUCxNTnVUQVQsSUFHVHRKLEdBQUFBLFdNclRlc0osWU51VEoiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgSG9tZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIb21lKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSG9tZSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0hvbWUnKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb24oKTtcbiAgICAgICAgdGhpcy5zbGlkZXIoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoSG9tZSwgW3tcbiAgICAgICAga2V5OiAnc2xpZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNsaWRlcigpIHtcbiAgICAgICAgICAgICQoXCIjc2xpZGVyLWhvbWVcIikucmVzcG9uc2l2ZVNsaWRlcyh7XG4gICAgICAgICAgICAgICAgbWFudWFsQ29udHJvbHM6ICcjc2xpZGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXG4gICAgICAgICAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBiZWZvcmU6IGZ1bmN0aW9uIGJlZm9yZShpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWV0aXRsZSA9ICQoXCIuaG9tZS1jb250ZW50IGgyXCIpLmVxKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgVHdlZW5MaXRlLmZyb21Ubyh0aGlzLmhvbWV0aXRsZSwgMSwgeyBvcGFjaXR5OiAwLCB5OiAtNDAgfSwgeyBvcGFjaXR5OiAxLCB5OiAwIH0sIDAuNCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FuaW1hdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmltYXRpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWVhcmVhID0gbmV3IFRpbWVsaW5lTWF4KCk7XG4gICAgICAgICAgICB0aGlzLnByb2plY3RhcmVhID0gbmV3IFRpbWVsaW5lTWF4KCk7XG4gICAgICAgICAgICB0aGlzLnNraWxsYXJlYSA9IG5ldyBUaW1lbGluZU1heCgpO1xuXG4gICAgICAgICAgICB0aGlzLmhvbWV0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZS1jb250ZW50IGgyXCIpO1xuICAgICAgICAgICAgdGhpcy5wcm9qZWN0aXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ3JpZC1pdGVtXCIpO1xuICAgICAgICAgICAgdGhpcy5za2lsbGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNraWxsLWl0ZW1cIik7XG5cbiAgICAgICAgICAgIHRoaXMuaG9tZWFyZWEuZnJvbVRvKHRoaXMuaG9tZXRpdGxlLCAxLCB7IG9wYWNpdHk6IDAsIHk6IC00MCB9LCB7IG9wYWNpdHk6IDEsIHk6IDAgfSwgMC40KTtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdGFyZWEuc3RhZ2dlckZyb21Ubyh0aGlzLnByb2plY3RpdGVtLCAwLjIsIHsgc2NhbGU6IDAsIHk6IDIwIH0sIHsgc2NhbGU6IDEsIHk6IDAgfSwgMC4yKTtcbiAgICAgICAgICAgIHRoaXMuc2tpbGxhcmVhLnN0YWdnZXJGcm9tVG8odGhpcy5za2lsbGl0ZW0sIDAuMiwgeyBvcGFjaXR5OiAwLCB4OiAtMjAgfSwgeyBvcGFjaXR5OiAxLCB4OiAwIH0sIDAuMik7XG5cbiAgICAgICAgICAgIHZhciBtYWluID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHsgdHJpZ2dlckVsZW1lbnQ6ICcjaG9tZScsIHJldmVyc2U6IGZhbHNlIH0pLnNldFR3ZWVuKHRoaXMuaG9tZWFyZWEpLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XG5cbiAgICAgICAgICAgIHZhciBwcm9qZWN0ID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHsgdHJpZ2dlckVsZW1lbnQ6ICcjcHJvamVjdHMnLCByZXZlcnNlOiBmYWxzZSB9KS5zZXRUd2Vlbih0aGlzLnByb2plY3RhcmVhKS5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xuXG4gICAgICAgICAgICB2YXIgc2tpbGwgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoeyB0cmlnZ2VyRWxlbWVudDogJyNwcm9qZWN0cycsIHJldmVyc2U6IGZhbHNlIH0pLnNldFR3ZWVuKHRoaXMuc2tpbGxhcmVhKS5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEhvbWU7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEhvbWU7XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX0RldmljZUluZm8gPSByZXF1aXJlKCcuLi90b29scy9EZXZpY2VJbmZvJyk7XG5cbnZhciBfRGV2aWNlSW5mbzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EZXZpY2VJbmZvKTtcblxudmFyIF9IZWFkZXIgPSByZXF1aXJlKCcuLi9wYXJ0aWFscy9IZWFkZXInKTtcblxudmFyIF9IZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSGVhZGVyKTtcblxudmFyIF9Gb290ZXIgPSByZXF1aXJlKCcuLi9wYXJ0aWFscy9Gb290ZXInKTtcblxudmFyIF9Gb290ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRm9vdGVyKTtcblxudmFyIF9Ib21lID0gcmVxdWlyZSgnLi9Ib21lJyk7XG5cbnZhciBfSG9tZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ib21lKTtcblxudmFyIF9TaW5nbGUgPSByZXF1aXJlKCcuL1NpbmdsZScpO1xuXG52YXIgX1NpbmdsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TaW5nbGUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgTWFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYWluKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFpbik7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ2luaXQnKTtcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhNYWluLCBbe1xuICAgICAgICBrZXk6ICdyZWFkeScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkeSgpIHtcbiAgICAgICAgICAgIF9EZXZpY2VJbmZvMi5kZWZhdWx0LmNoZWNrKCk7XG4gICAgICAgICAgICBpZiAoX0RldmljZUluZm8yLmRlZmF1bHQuaXNUb3VjaCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwidG91Y2hcIik7XG4gICAgICAgICAgICBpZiAoX0RldmljZUluZm8yLmRlZmF1bHQuaXNJRSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaWVcIik7XG4gICAgICAgICAgICBpZiAoX0RldmljZUluZm8yLmRlZmF1bHQuaXNBbmRyb2lkKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJhbmRyb2lkXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzSU9TKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJpb3NcIik7XG4gICAgICAgICAgICBpZiAoX0RldmljZUluZm8yLmRlZmF1bHQuaXNGaXJlZm94KSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJmaXJlZm94XCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzU2FmYXJpKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJzYWZhcmlcIik7XG4gICAgICAgICAgICBpZiAoX0RldmljZUluZm8yLmRlZmF1bHQuaXNDaHJvbWUpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImNocm9tZVwiKTtcblxuICAgICAgICAgICAgLy8gbGV0IHByZWxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVsb2FkZXInKTtcbiAgICAgICAgICAgIC8vIFR3ZWVuTGl0ZS50byhwcmVsb2FkZXIsIDAuNSx7Y3NzOnthdXRvQWxwaGE6MH0sZGVsYXk6MC40fSk7XG4gICAgICAgICAgICAvLyBUd2VlbkxpdGUuc2V0KHByZWxvYWRlcix7Y3NzOntkaXNwbGF5OlwiYmxvY2tcIn0sZGVsYXk6MC44fSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gbmV3IF9IZWFkZXIyLmRlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gbmV3IF9Gb290ZXIyLmRlZmF1bHQoKTtcblxuICAgICAgICAgICAgc3dpdGNoICgkKCdib2R5IHNlY3Rpb24nKS5hdHRyKFwiZGF0YS10ZW1wbGF0ZVwiKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJob21lXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IG5ldyBfSG9tZTIuZGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IG5ldyBfU2luZ2xlMi5kZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE1haW47XG59KCk7XG5cbm5ldyBNYWluKCk7XG5cbn0se1wiLi4vcGFydGlhbHMvRm9vdGVyXCI6NCxcIi4uL3BhcnRpYWxzL0hlYWRlclwiOjUsXCIuLi90b29scy9EZXZpY2VJbmZvXCI6NixcIi4vSG9tZVwiOjEsXCIuL1NpbmdsZVwiOjN9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBTaW5nbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2luZ2xlKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2luZ2xlKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnU2luZ2xlJyk7XG4gICAgICAgIHRoaXMucGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBhbmVsXCIpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnNpbmdsZSA9IHRoaXMuYW5pbWF0aW9uc2luZ2xlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc2luZ2xlKCk7XG4gICAgICAgIHRoaXMuc2xpZGVyID0gdGhpcy5zbGlkZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zbGlkZXIoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2luZ2xlLCBbe1xuICAgICAgICBrZXk6IFwic2xpZGVyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzbGlkZXIoKSB7XG4gICAgICAgICAgICAkKFwiI3NsaWRlci1zaW5nbGVcIikucmVzcG9uc2l2ZVNsaWRlcyh7XG4gICAgICAgICAgICAgICAgbWFudWFsQ29udHJvbHM6ICcjc2xpZGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXG4gICAgICAgICAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBiZWZvcmU6IGZ1bmN0aW9uIGJlZm9yZShpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWV0aXRsZSA9ICQoXCIuc2xpZGVyLWNvbnRlbnQgaDJcIikuZXEoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBUd2VlbkxpdGUuZnJvbVRvKHRoaXMuaG9tZXRpdGxlLCAxLCB7IG9wYWNpdHk6IDAsIHk6IC00MCB9LCB7IG9wYWNpdHk6IDEsIHk6IDAgfSwgMC40KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImFuaW1hdGlvbnNpbmdsZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYW5pbWF0aW9uc2luZ2xlKCkge1xuICAgICAgICAgICAgdGhpcy5wYW5lbGFyZWEgPSBuZXcgVGltZWxpbmVNYXgoKTtcbiAgICAgICAgICAgIHRoaXMucGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BhbmVsXCIpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjcGFuZWwgLmVsZW1cIik7XG4gICAgICAgICAgICB0aGlzLnBhbmVsYXJlYS5mcm9tVG8odGhpcy5wYW5lbCwgMSwgeyBvcGFjaXR5OiAwLCB4OiA0MCB9LCB7IG9wYWNpdHk6IDEsIHg6IDAgfSwgeyBlYXNlOiAnQ3ViaWMuZWFzZU91dCcgfSk7XG4gICAgICAgICAgICB0aGlzLnBhbmVsYXJlYS5zdGFnZ2VyRnJvbVRvKHRoaXMuZWxlbWVudHMsIDAuNSwgeyBvcGFjaXR5OiAwLCB5OiAtNDAgfSwgeyBvcGFjaXR5OiAxLCB5OiAwIH0sIDAuMik7XG5cbiAgICAgICAgICAgIHZhciBzaW5nbGUgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoeyB0cmlnZ2VyRWxlbWVudDogJyNtYWluJywgcmV2ZXJzZTogZmFsc2UgfSkuc2V0VHdlZW4odGhpcy5wYW5lbGFyZWEpLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2luZ2xlO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTaW5nbGU7XG5cbn0se31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBGb290ZXIgPSBmdW5jdGlvbiBGb290ZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvb3Rlcik7XG5cbiAgICBjb25zb2xlLmxvZygnRm9vdGVyJyk7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBGb290ZXI7XG5cbn0se31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGVhZGVyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVhZGVyKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnSGVhZGVyJyk7XG4gICAgICAgIHRoaXMuaGFtYnVyZ2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hhbWJ1cmdlcicpO1xuICAgICAgICB0aGlzLmFuY2hvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0gPiBhJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hbmNob3IubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5hbmNob3JKdW1wLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWVudXJlc2l6ZSA9IHRoaXMubWVudXJlc2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm1lbnVyZXNpemUoKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMubWVudXJlc2l6ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuYWN0aXZlT25TY3JvbGwuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuaGFtYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy50b2dnbGVtZW51bW9iaWxlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNsaWNrID0gZmFsc2U7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEhlYWRlciwgW3tcbiAgICAgICAga2V5OiAnbWVudXJlc2l6ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZW51cmVzaXplKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gMTAwO1xuICAgICAgICAgICAgdGhpcy5uYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFzdGhlYWQnKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2LmNsYXNzTGlzdC5hZGQoJ3NtYWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0IDw9IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uYXYuY2xhc3NMaXN0LnJlbW92ZSgnc21hbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYW5jaG9ySnVtcCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmNob3JKdW1wKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhob21lKTtcbiAgICAgICAgICAgIHZhciBwYWdlID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3NpbmdsZScpO1xuICAgICAgICAgICAgaWYgKCFwYWdlKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogJChldmVudC50YXJnZXQuaGFzaCkub2Zmc2V0KCkudG9wIC0gNDQgfSwgNTAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBob21lICsgZXZlbnQudGFyZ2V0Lmhhc2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FjdGl2ZU9uU2Nyb2xsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFjdGl2ZU9uU2Nyb2xsKCkge1xuICAgICAgICAgICAgdmFyIHBvcyA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gc2VjdGlvbnNbaV0uZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBzZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICAgICAgICAgIGlmIChzZWN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlY3Rwb3MgPSAkKHNlY3QpLnBvc2l0aW9uKCkudG9wIC0gMTAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjdHBvcyA8PSBwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNuYXZiYXIgdWwgbGkuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhciB1bCBsaS4nICsgaWQgKyAnJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd0b2dnbGVtZW51bW9iaWxlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZW1lbnVtb2JpbGUoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jbGljaykge1xuICAgICAgICAgICAgICAgIFR3ZWVuTGl0ZS50byh0aGlzLnBhbmVsLCAwLCB7IGNsYXNzTmFtZTogJys9b3BlbicsIGNzczogJ3RyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwJSknIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2sgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBUd2VlbkxpdGUudG8odGhpcy5wYW5lbCwgMCwgeyBjbGFzc05hbWU6ICctPW9wZW4nLCBjc3M6ICd0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTEwMCUpJyB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gSGVhZGVyO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBIZWFkZXI7XG5cbn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIERldmljZUluZm8gPSBmdW5jdGlvbiAoKSB7XG5cdFx0ZnVuY3Rpb24gRGV2aWNlSW5mbygpIHtcblx0XHRcdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIERldmljZUluZm8pO1xuXHRcdH1cblxuXHRcdF9jcmVhdGVDbGFzcyhEZXZpY2VJbmZvLCBudWxsLCBbe1xuXHRcdFx0XHRrZXk6IFwiY2hlY2tcIixcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNoZWNrKCkge1xuXG5cdFx0XHRcdFx0XHQvL0ZGXG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc0Nocm9tZSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY2hyb21lXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzU2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJjaHJvbWVcIikgPD0gLTEgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJzYWZhcmlcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcblx0XHRcdFx0XHRcdERldmljZUluZm8uaXNBbmRyb2lkID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJhbmRyb2lkXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbTtcblxuXHRcdFx0XHRcdFx0Ly9JRVxuXHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc0lFID0gRGV2aWNlSW5mby5nZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpICE9IC0xO1xuXG5cdFx0XHRcdFx0XHQvLyBJUyBUT1VDSFxuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRkb2N1bWVudC5jcmVhdGVFdmVudChcIlRvdWNoRXZlbnRcIik7XG5cdFx0XHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc1RvdWNoID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzVG91Y2ggPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdFx0a2V5OiBcImdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uXCIsXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpIHtcblxuXHRcdFx0XHRcdFx0dmFyIHJ2ID0gLTE7XG5cdFx0XHRcdFx0XHR2YXIgcmUgPSBudWxsO1xuXHRcdFx0XHRcdFx0dmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuXHRcdFx0XHRcdFx0aWYgKG5hdmlnYXRvci5hcHBOYW1lID09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRyZSA9IG5ldyBSZWdFeHAoXCJNU0lFIChbMC05XXsxLH1bXFwuMC05XXswLH0pXCIpO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHJlLmV4ZWModWEpICE9PSBudWxsKSBydiA9IHBhcnNlRmxvYXQoUmVnRXhwLiQxKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobmF2aWdhdG9yLmFwcE5hbWUgPT0gJ05ldHNjYXBlJykge1xuXG5cdFx0XHRcdFx0XHRcdFx0cmUgPSBuZXcgUmVnRXhwKFwiVHJpZGVudC8uKnJ2OihbMC05XXsxLH1bXFwuMC05XXswLH0pXCIpO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHJlLmV4ZWModWEpICE9PSBudWxsKSBydiA9IHBhcnNlRmxvYXQoUmVnRXhwLiQxKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIHJ2O1xuXHRcdFx0XHR9XG5cdFx0fV0pO1xuXG5cdFx0cmV0dXJuIERldmljZUluZm87XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IERldmljZUluZm87XG5cbn0se31dfSx7fSxbMl0pXG5cbiIsImNsYXNzIEhvbWUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZScpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKCk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24oKTtcclxuICAgICAgICB0aGlzLnNsaWRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNsaWRlcigpe1xyXG4gICAgXHQkKFwiI3NsaWRlci1ob21lXCIpLnJlc3BvbnNpdmVTbGlkZXMoe1xyXG4gICAgICAgICAgICBtYW51YWxDb250cm9sczogJyNzbGlkZXItcGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXHJcbiAgICAgICAgICAgIGF1dG86IHRydWUsXHJcbiAgICAgICAgICAgIGJlZm9yZTogZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgXHRcdFx0dGhpcy5ob21ldGl0bGUgPSAkKFwiLmhvbWUtY29udGVudCBoMlwiKS5lcShpbmRleCk7XHJcbiAgICAgICAgICAgICAgXHRUd2VlbkxpdGUuZnJvbVRvKHRoaXMuaG9tZXRpdGxlLCAxLCB7IG9wYWNpdHk6IDAsIHk6LTQwIH0sIHsgb3BhY2l0eTogMSwgeTowIH0sIDAuNCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhbmltYXRpb24oKXtcclxuICAgICAgICB0aGlzLmhvbWVhcmVhICAgIFx0PSBuZXcgVGltZWxpbmVNYXgoKTtcclxuICAgICAgICB0aGlzLnByb2plY3RhcmVhICAgID0gbmV3IFRpbWVsaW5lTWF4KCk7XHJcbiAgICAgICAgdGhpcy5za2lsbGFyZWEgICAgXHQ9IG5ldyBUaW1lbGluZU1heCgpO1xyXG5cclxuICAgICAgICB0aGlzLmhvbWV0aXRsZSBcdFx0PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhvbWUtY29udGVudCBoMlwiKTtcclxuICAgICAgICB0aGlzLnByb2plY3RpdGVtIFx0PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmdyaWQtaXRlbVwiKTtcclxuICAgICAgICB0aGlzLnNraWxsaXRlbSBcdFx0PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNraWxsLWl0ZW1cIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ob21lYXJlYS5mcm9tVG8odGhpcy5ob21ldGl0bGUsIDEsIHsgb3BhY2l0eTogMCwgeTotNDAgfSwgeyBvcGFjaXR5OiAxLCB5OjAgfSwgMC40KTtcclxuICAgICAgICB0aGlzLnByb2plY3RhcmVhLnN0YWdnZXJGcm9tVG8odGhpcy5wcm9qZWN0aXRlbSwgMC4yLCB7IHNjYWxlOiAwLCB5OjIwfSwgeyBzY2FsZTogMSwgeTowIH0sIDAuMik7XHJcbiAgICAgICAgdGhpcy5za2lsbGFyZWEuc3RhZ2dlckZyb21Ubyh0aGlzLnNraWxsaXRlbSwgMC4yLCB7IG9wYWNpdHk6IDAsIHg6LTIwfSwgeyBvcGFjaXR5OiAxLCB4OjAgfSwgMC4yKTtcclxuICAgICAgIFxyXG4gICAgICAgIGxldCBtYWluID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogJyNob21lJywgcmV2ZXJzZTogZmFsc2UsfSlcclxuICAgICAgICAuc2V0VHdlZW4odGhpcy5ob21lYXJlYSlcclxuICAgICAgICAuYWRkVG8odGhpcy5jb250cm9sbGVyKTtcclxuXHJcbiAgICAgICAgbGV0IHByb2plY3QgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe3RyaWdnZXJFbGVtZW50OiAnI3Byb2plY3RzJywgcmV2ZXJzZTogZmFsc2UsfSlcclxuICAgICAgICAuc2V0VHdlZW4odGhpcy5wcm9qZWN0YXJlYSlcclxuICAgICAgICAuYWRkVG8odGhpcy5jb250cm9sbGVyKTtcclxuXHJcbiAgICAgICAgbGV0IHNraWxsID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogJyNwcm9qZWN0cycsIHJldmVyc2U6IGZhbHNlLH0pXHJcbiAgICAgICAgLnNldFR3ZWVuKHRoaXMuc2tpbGxhcmVhKVxyXG4gICAgICAgIC5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEhvbWU7IiwiaW1wb3J0IERldmljZUluZm8gZnJvbSAnLi4vdG9vbHMvRGV2aWNlSW5mbyc7XG5pbXBvcnQgSGVhZGVyIGZyb20gJy4uL3BhcnRpYWxzL0hlYWRlcic7XG5pbXBvcnQgRm9vdGVyIGZyb20gJy4uL3BhcnRpYWxzL0Zvb3Rlcic7XG5cbmltcG9ydCBIb21lIGZyb20gJy4vSG9tZSc7XG5pbXBvcnQgU2luZ2xlIGZyb20gJy4vU2luZ2xlJztcblxuY2xhc3MgTWFpbiB7XG5cbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdpbml0Jyk7XG4gICAgICAgIHRoaXMucmVhZHkoKTtcbiAgICB9XG5cbiAgICByZWFkeSgpIHtcbiAgICBcdERldmljZUluZm8uY2hlY2soKTtcbiAgICAgICAgaWYoRGV2aWNlSW5mby5pc1RvdWNoKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJ0b3VjaFwiKTtcbiAgICBcdGlmKERldmljZUluZm8uaXNJRSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaWVcIik7XG4gICAgXHRpZihEZXZpY2VJbmZvLmlzQW5kcm9pZCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiYW5kcm9pZFwiKTtcbiAgICBcdGlmKERldmljZUluZm8uaXNJT1MpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImlvc1wiKTtcbiAgICAgICAgaWYoRGV2aWNlSW5mby5pc0ZpcmVmb3gpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImZpcmVmb3hcIik7XG4gICAgICAgIGlmKERldmljZUluZm8uaXNTYWZhcmkpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcInNhZmFyaVwiKTtcbiAgICAgICAgaWYoRGV2aWNlSW5mby5pc0Nocm9tZSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiY2hyb21lXCIpO1xuXG4gICAgICAgIC8vIGxldCBwcmVsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlbG9hZGVyJyk7XG4gICAgICAgIC8vIFR3ZWVuTGl0ZS50byhwcmVsb2FkZXIsIDAuNSx7Y3NzOnthdXRvQWxwaGE6MH0sZGVsYXk6MC40fSk7XG4gICAgICAgIC8vIFR3ZWVuTGl0ZS5zZXQocHJlbG9hZGVyLHtjc3M6e2Rpc3BsYXk6XCJibG9ja1wifSxkZWxheTowLjh9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaGVhZGVyID0gbmV3IEhlYWRlcigpO1xuICAgICAgICB0aGlzLmZvb3RlciA9IG5ldyBGb290ZXIoKTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCgkKCdib2R5IHNlY3Rpb24nKS5hdHRyKFwiZGF0YS10ZW1wbGF0ZVwiKSl7XG4gICAgICAgICAgICBjYXNlIFwiaG9tZVwiOiB0aGlzLnBhZ2UgPSBuZXcgSG9tZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6IHRoaXMucGFnZSA9IG5ldyBTaW5nbGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cblxubmV3IE1haW4oKTsiLCJjbGFzcyBTaW5nbGUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2luZ2xlJyk7XHJcbiAgICAgICAgdGhpcy5wYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGFuZWxcIik7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXIoKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNpbmdsZSA9IHRoaXMuYW5pbWF0aW9uc2luZ2xlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zaW5nbGUoKTtcclxuICAgICAgICB0aGlzLnNsaWRlciA9IHRoaXMuc2xpZGVyLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBzbGlkZXIoKXtcclxuICAgIFx0JChcIiNzbGlkZXItc2luZ2xlXCIpLnJlc3BvbnNpdmVTbGlkZXMoe1xyXG4gICAgICAgICAgICBtYW51YWxDb250cm9sczogJyNzbGlkZXItcGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXHJcbiAgICAgICAgICAgIGF1dG86IHRydWUsXHJcbiAgICAgICAgICAgIGJlZm9yZTogZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgXHRcdFx0dGhpcy5ob21ldGl0bGUgPSAkKFwiLnNsaWRlci1jb250ZW50IGgyXCIpLmVxKGluZGV4KTtcclxuICAgICAgICAgICAgICBcdFR3ZWVuTGl0ZS5mcm9tVG8odGhpcy5ob21ldGl0bGUsIDEsIHsgb3BhY2l0eTogMCwgeTotNDAgfSwgeyBvcGFjaXR5OiAxLCB5OjAgfSwgMC40KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFuaW1hdGlvbnNpbmdsZSgpe1xyXG4gICAgICAgIHRoaXMucGFuZWxhcmVhID0gbmV3IFRpbWVsaW5lTWF4KCk7XHJcbiAgICAgICAgdGhpcy5wYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGFuZWxcIik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjcGFuZWwgLmVsZW1cIik7XHJcbiAgICAgICAgdGhpcy5wYW5lbGFyZWEuZnJvbVRvKHRoaXMucGFuZWwsIDEsIHsgb3BhY2l0eTogMCwgeDo0MCB9LCB7IG9wYWNpdHk6IDEsIHg6MH0sIHtlYXNlOidDdWJpYy5lYXNlT3V0J30pO1xyXG4gICAgICAgIHRoaXMucGFuZWxhcmVhLnN0YWdnZXJGcm9tVG8odGhpcy5lbGVtZW50cywgMC41LCB7IG9wYWNpdHk6IDAsIHk6LTQwIH0sIHsgb3BhY2l0eTogMSwgeTowfSwgMC4yKTtcclxuXHJcbiAgICAgICAgbGV0IHNpbmdsZSA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7dHJpZ2dlckVsZW1lbnQ6ICcjbWFpbicsIHJldmVyc2U6IGZhbHNlLH0pXHJcbiAgICAgICAgLnNldFR3ZWVuKHRoaXMucGFuZWxhcmVhKVxyXG4gICAgICAgIC5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaW5nbGU7IiwiY2xhc3MgRm9vdGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0Zvb3RlcicpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9vdGVyOyIsImNsYXNzIEhlYWRlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdIZWFkZXInKTtcclxuICAgICAgICB0aGlzLmhhbWJ1cmdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoYW1idXJnZXInKTtcclxuICAgICAgICB0aGlzLmFuY2hvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0gPiBhJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFuY2hvci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIFx0dGhpcy5hbmNob3JbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmFuY2hvckp1bXAuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWVudXJlc2l6ZSA9IHRoaXMubWVudXJlc2l6ZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubWVudXJlc2l6ZSgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm1lbnVyZXNpemUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuYWN0aXZlT25TY3JvbGwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5oYW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnRvZ2dsZW1lbnVtb2JpbGUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5jbGljayA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIG1lbnVyZXNpemUoKXtcclxuICAgICAgICBjb25zdCBzdGFydCA9IDEwMDtcclxuICAgICAgICB0aGlzLm5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXN0aGVhZCcpO1xyXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzdGFydCl7IFxyXG4gICAgICAgICAgICB0aGlzLm5hdi5jbGFzc0xpc3QuYWRkKCdzbWFsbCcpOyBcclxuICAgICAgICB9IFxyXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPD0gc3RhcnQpe1xyXG4gICAgICAgICAgICB0aGlzLm5hdi5jbGFzc0xpc3QucmVtb3ZlKCdzbWFsbCcpOyBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYW5jaG9ySnVtcChldmVudCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coaG9tZSk7XHJcbiAgICAgICAgbGV0IHBhZ2UgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnc2luZ2xlJyk7XHJcbiAgICAgICAgaWYgKCFwYWdlKSB7XHJcbiAgICAgICAgXHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6ICQoZXZlbnQudGFyZ2V0Lmhhc2gpLm9mZnNldCgpLnRvcCAtIDQ0fSwgNTAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhvbWUgKyBldmVudC50YXJnZXQuaGFzaDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYWN0aXZlT25TY3JvbGwoKXtcclxuICAgICAgICBsZXQgcG9zID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG4gICAgICAgIGxldCBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaWQgPSBzZWN0aW9uc1tpXS5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICAgICAgICAgIGxldCBzZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgICAgICBpZiAoc2VjdCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VjdHBvcyA9ICQoc2VjdCkucG9zaXRpb24oKS50b3AgLSAxMDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VjdHBvcyA8PSBwb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjbmF2YmFyIHVsIGxpLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjbmF2YmFyIHVsIGxpLicraWQrJycpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVtZW51bW9iaWxlKGV2ZW50KXtcclxuICAgICAgICBpZiAoIXRoaXMuY2xpY2spIHtcclxuICAgICAgICAgICAgVHdlZW5MaXRlLnRvKHRoaXMucGFuZWwsIDAsIHtjbGFzc05hbWU6Jys9b3BlbicsIGNzczondHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKSd9KTtcclxuICAgICAgICAgICAgdGhpcy5jbGljayA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVHdlZW5MaXRlLnRvKHRoaXMucGFuZWwsIDAsIHtjbGFzc05hbWU6Jy09b3BlbicsIGNzczondHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDAlKSd9KTtcclxuICAgICAgICAgICAgdGhpcy5jbGljayA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjsiLCJjbGFzcyBEZXZpY2VJbmZvIHtcclxuXHJcblx0c3RhdGljIGNoZWNrKCkge1xyXG5cclxuXHRcdC8vRkZcclxuXHRcdERldmljZUluZm8uaXNGaXJlZm94ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJmaXJlZm94XCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XHJcblx0XHREZXZpY2VJbmZvLmlzQ2hyb21lID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJjaHJvbWVcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcclxuXHRcdERldmljZUluZm8uaXNTYWZhcmkgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNocm9tZVwiKSA8PSAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInNhZmFyaVwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0RGV2aWNlSW5mby5pc0FuZHJvaWQgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImFuZHJvaWRcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcclxuXHRcdERldmljZUluZm8uaXNJT1MgPSAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtO1xyXG5cclxuXHRcdC8vSUVcclxuXHRcdERldmljZUluZm8uaXNJRSA9IERldmljZUluZm8uZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24oKSAhPSAtMTtcclxuXHJcblx0XHQvLyBJUyBUT1VDSFxyXG5cdFx0dHJ5IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJUb3VjaEV2ZW50XCIpO1xyXG4gICAgICAgICAgICBEZXZpY2VJbmZvLmlzVG91Y2ggPSB0cnVlO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIERldmljZUluZm8uaXNUb3VjaCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24gKCkge1xyXG5cclxuICAgICAgXHRsZXQgcnYgPSAtMTtcclxuICAgICAgXHRsZXQgcmUgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuXHJcblx0XHRpZiAobmF2aWdhdG9yLmFwcE5hbWUgPT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpXHJcblx0XHR7XHJcblxyXG5cdFx0XHRyZSAgPSBuZXcgUmVnRXhwKFwiTVNJRSAoWzAtOV17MSx9W1xcLjAtOV17MCx9KVwiKTtcclxuXHJcblx0XHRcdGlmIChyZS5leGVjKHVhKSAhPT0gbnVsbCkgcnYgPSBwYXJzZUZsb2F0KCBSZWdFeHAuJDEgKTtcclxuXHJcblx0XHR9IGVsc2UgaWYgKG5hdmlnYXRvci5hcHBOYW1lID09ICdOZXRzY2FwZScpIHtcclxuXHJcblx0XHRcdHJlICA9IG5ldyBSZWdFeHAoXCJUcmlkZW50Ly4qcnY6KFswLTldezEsfVtcXC4wLTldezAsfSlcIik7XHJcblxyXG5cdFx0XHRpZiAocmUuZXhlYyh1YSkgIT09IG51bGwpIHJ2ID0gcGFyc2VGbG9hdCggUmVnRXhwLiQxICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJ2O1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGV2aWNlSW5mbzsiXX0=
