!function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e),console.log("Home"),this.controller=new ScrollMagic.Controller,this.animation(),this.slider()}return r(e,[{key:"slider",value:function(){$("#slider-home").responsiveSlides({manualControls:"#slider-pagination",timeout:6e3,auto:!0,before:function(e){this.hometitle=$(".home-content h2").eq(e),TweenLite.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4)}})}},{key:"animation",value:function(){this.homearea=new TimelineMax,this.projectarea=new TimelineMax,this.skillarea=new TimelineMax,this.hometitle=document.querySelector(".home-content h2"),this.projectitem=document.querySelectorAll(".grid-item"),this.skillitem=document.querySelectorAll(".skill-item"),this.homearea.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4),this.projectarea.staggerFromTo(this.projectitem,.2,{scale:0,y:20},{scale:1,y:0},.2),this.skillarea.staggerFromTo(this.skillitem,.2,{opacity:0,x:-20},{opacity:1,x:0},.2);new ScrollMagic.Scene({triggerElement:"#home",reverse:!1}).setTween(this.homearea).addTo(this.controller),new ScrollMagic.Scene({triggerElement:"#projects",reverse:!1}).setTween(this.projectarea).addTo(this.controller),new ScrollMagic.Scene({triggerElement:"#projects",reverse:!1}).setTween(this.skillarea).addTo(this.controller)}}]),e}();n["default"]=i},{}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=e("../tools/DeviceInfo"),s=o(a),l=e("../partials/Header"),c=o(l),u=e("../partials/Footer"),f=o(u),d=e("./Home"),h=o(d),m=function(){function e(){r(this,e),console.log("init"),this.ready()}return i(e,[{key:"ready",value:function(){switch(s["default"].check(),s["default"].isTouch&&document.body.classList.add("touch"),s["default"].isIE&&document.body.classList.add("ie"),s["default"].isAndroid&&document.body.classList.add("android"),s["default"].isIOS&&document.body.classList.add("ios"),s["default"].isFirefox&&document.body.classList.add("firefox"),s["default"].isSafari&&document.body.classList.add("safari"),s["default"].isChrome&&document.body.classList.add("chrome"),this.header=new c["default"],this.footer=new f["default"],$("body section").attr("data-template")){case"home":this.page=new h["default"]}}}]),e}();new m},{"../partials/Footer":3,"../partials/Header":4,"../tools/DeviceInfo":5,"./Home":1}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function i(){o(this,i),console.log("Footer")};n["default"]=r},{}],4:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e),console.log("Header"),this.menuresize(),window.addEventListener("scroll",this.menuresize.bind(this)),window.addEventListener("scroll",this.activeOnScroll.bind(this)),this.anchor=document.querySelectorAll(".menu-item > a");for(var t=0;t<this.anchor.length;t++)this.anchor[t].addEventListener("click",this.anchorJump.bind(this))}return r(e,[{key:"menuresize",value:function(){var e=100;this.nav=document.getElementById("masthead"),window.pageYOffset>e&&this.nav.classList.add("small"),window.pageYOffset<=e&&this.nav.classList.remove("small")}},{key:"anchorJump",value:function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(e.target.hash).offset().top-44},500)}},{key:"activeOnScroll",value:function(){for(var e=window.pageYOffset,t=document.querySelectorAll(".section"),n=0;n<t.length;n++){var o=t[n].getAttribute("id"),r=document.getElementById(o);if(null!=r){var i=$(r).position().top-100;e>=i&&($("#navbar ul li.active").removeClass("active"),$("#navbar ul li."+o).addClass("active"))}}}}]),e}();n["default"]=i},{}],5:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e)}return r(e,null,[{key:"check",value:function(){e.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,e.isChrome=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,e.isSafari=navigator.userAgent.toLowerCase().indexOf("chrome")<=-1&&navigator.userAgent.toLowerCase().indexOf("safari")>-1,e.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>-1,e.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e.isIE=-1!=e.getInternetExplorerVersion();try{document.createEvent("TouchEvent"),e.isTouch=!0}catch(t){e.isTouch=!1}}},{key:"getInternetExplorerVersion",value:function(){var e=-1,t=null,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&(e=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&(e=parseFloat(RegExp.$1))),e}}]),e}();n["default"]=i},{}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC5qcyIsInNyYy9qcy9jdXN0b20vSG9tZS5qcyIsInNyYy9qcy9jdXN0b20vTWFpbi5qcyIsInNyYy9qcy9wYXJ0aWFscy9Gb290ZXIuanMiLCJzcmMvanMvcGFydGlhbHMvSGVhZGVyLmpzIiwic3JjL2pzL3Rvb2xzL0RldmljZUluZm8uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiSG9tZSIsInRoaXMiLCJjb25zb2xlIiwibG9nIiwiY29udHJvbGxlciIsIlNjcm9sbE1hZ2ljIiwiQ29udHJvbGxlciIsImFuaW1hdGlvbiIsInNsaWRlciIsIiQiLCJyZXNwb25zaXZlU2xpZGVzIiwibWFudWFsQ29udHJvbHMiLCJ0aW1lb3V0IiwiYXV0byIsImJlZm9yZSIsImluZGV4IiwiaG9tZXRpdGxlIiwiZXEiLCJUd2VlbkxpdGUiLCJmcm9tVG8iLCJvcGFjaXR5IiwieSIsImhvbWVhcmVhIiwiVGltZWxpbmVNYXgiLCJwcm9qZWN0YXJlYSIsInNraWxsYXJlYSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2plY3RpdGVtIiwicXVlcnlTZWxlY3RvckFsbCIsInNraWxsaXRlbSIsInN0YWdnZXJGcm9tVG8iLCJzY2FsZSIsIngiLCJTY2VuZSIsInRyaWdnZXJFbGVtZW50IiwicmV2ZXJzZSIsInNldFR3ZWVuIiwiYWRkVG8iLCIyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX0RldmljZUluZm8iLCJfRGV2aWNlSW5mbzIiLCJfSGVhZGVyIiwiX0hlYWRlcjIiLCJfRm9vdGVyIiwiX0Zvb3RlcjIiLCJfSG9tZSIsIl9Ib21lMiIsIk1haW4iLCJyZWFkeSIsImNoZWNrIiwiaXNUb3VjaCIsImJvZHkiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0lFIiwiaXNBbmRyb2lkIiwiaXNJT1MiLCJpc0ZpcmVmb3giLCJpc1NhZmFyaSIsImlzQ2hyb21lIiwiaGVhZGVyIiwiZm9vdGVyIiwiYXR0ciIsInBhZ2UiLCIuLi9wYXJ0aWFscy9Gb290ZXIiLCIuLi9wYXJ0aWFscy9IZWFkZXIiLCIuLi90b29scy9EZXZpY2VJbmZvIiwiLi9Ib21lIiwiMyIsIkZvb3RlciIsIjQiLCJIZWFkZXIiLCJtZW51cmVzaXplIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJhY3RpdmVPblNjcm9sbCIsImFuY2hvciIsImFuY2hvckp1bXAiLCJzdGFydCIsIm5hdiIsImdldEVsZW1lbnRCeUlkIiwicGFnZVlPZmZzZXQiLCJyZW1vdmUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImhhc2giLCJvZmZzZXQiLCJ0b3AiLCJwb3MiLCJzZWN0aW9ucyIsImlkIiwiZ2V0QXR0cmlidXRlIiwic2VjdCIsInNlY3Rwb3MiLCJwb3NpdGlvbiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCI1IiwiRGV2aWNlSW5mbyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsInRlc3QiLCJNU1N0cmVhbSIsImdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uIiwiY3JlYXRlRXZlbnQiLCJydiIsInJlIiwidWEiLCJhcHBOYW1lIiwiUmVnRXhwIiwiZXhlYyIsInBhcnNlRmxvYXQiLCIkMSJdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQUEsR0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsR0FBQUUsR0FBQSxrQkFBQUMsVUFBQUEsT0FBQSxLQUFBRixHQUFBQyxFQUFBLE1BQUFBLEdBQUFGLEdBQUEsRUFBQSxJQUFBSSxFQUFBLE1BQUFBLEdBQUFKLEdBQUEsRUFBQSxJQUFBSyxHQUFBLEdBQUFDLE9BQUEsdUJBQUFOLEVBQUEsSUFBQSxNQUFBSyxHQUFBRSxLQUFBLG1CQUFBRixFQUFBLEdBQUFHLEdBQUFYLEVBQUFHLElBQUFTLFdBQUFiLEdBQUFJLEdBQUEsR0FBQVUsS0FBQUYsRUFBQUMsUUFBQSxTQUFBZCxHQUFBLEdBQUFFLEdBQUFELEVBQUFJLEdBQUEsR0FBQUwsRUFBQSxPQUFBSSxHQUFBRixFQUFBQSxFQUFBRixJQUFBYSxFQUFBQSxFQUFBQyxRQUFBZCxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLE1BQUFELEdBQUFHLEdBQUFTLFFBQUEsSUFBQSxHQUFBTCxHQUFBLGtCQUFBRCxVQUFBQSxRQUFBSCxFQUFBLEVBQUFBLEVBQUFGLEVBQUFhLE9BQUFYLElBQUFELEVBQUFELEVBQUFFLEdBQUEsT0FBQUQsS0FBQWEsR0FBQSxTQUFBVCxFQUFBVSxFQUFBSixHQ0NBLFlBUUEsU0FBU0ssR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FOaEhDLE9BQU9DLGVBQWVWLEVBQVMsY0FDM0JXLE9BQU8sR0FHWCxJQUFJQyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJcEIsR0FBSSxFQUFHQSxFQUFJb0IsRUFBTWIsT0FBUVAsSUFBSyxDQUFF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R0FBSyxHQUNMQyxFQUFLLEtBQ0ZDLEVBQUtWLFVBQVVDLFNBZ0IzQixPQWR5QiwrQkFBckJELFVBQVVXLFNBR2JGLEVBQU0sR0FBSUcsUUFBTyw4QkFFRyxPQUFoQkgsRUFBR0ksS0FBS0gsS0FBY0YsRUFBS00sV0FBWUYsT0FBT0csTUFFbkIsWUFBckJmLFVBQVVXLFVBRXBCRixFQUFNLEdBQUlHLFFBQU8sc0NBRUcsT0FBaEJILEVBQUdJLEtBQUtILEtBQWNGLEVBQUtNLFdBQVlGLE9BQU9HLE1BRzVDUCxNTGtPQVQsSUFHVGxJLEdBQUFBLFdLaE9la0ksWUxrT0oiLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgSG9tZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIb21lKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSG9tZSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0hvbWUnKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb24oKTtcbiAgICAgICAgdGhpcy5zbGlkZXIoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoSG9tZSwgW3tcbiAgICAgICAga2V5OiAnc2xpZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNsaWRlcigpIHtcbiAgICAgICAgICAgICQoXCIjc2xpZGVyLWhvbWVcIikucmVzcG9uc2l2ZVNsaWRlcyh7XG4gICAgICAgICAgICAgICAgbWFudWFsQ29udHJvbHM6ICcjc2xpZGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXG4gICAgICAgICAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBiZWZvcmU6IGZ1bmN0aW9uIGJlZm9yZShpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWV0aXRsZSA9ICQoXCIuaG9tZS1jb250ZW50IGgyXCIpLmVxKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgVHdlZW5MaXRlLmZyb21Ubyh0aGlzLmhvbWV0aXRsZSwgMSwgeyBvcGFjaXR5OiAwLCB5OiAtNDAgfSwgeyBvcGFjaXR5OiAxLCB5OiAwIH0sIDAuNCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FuaW1hdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmltYXRpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWVhcmVhID0gbmV3IFRpbWVsaW5lTWF4KCk7XG4gICAgICAgICAgICB0aGlzLnByb2plY3RhcmVhID0gbmV3IFRpbWVsaW5lTWF4KCk7XG4gICAgICAgICAgICB0aGlzLnNraWxsYXJlYSA9IG5ldyBUaW1lbGluZU1heCgpO1xuXG4gICAgICAgICAgICB0aGlzLmhvbWV0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZS1jb250ZW50IGgyXCIpO1xuICAgICAgICAgICAgdGhpcy5wcm9qZWN0aXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ3JpZC1pdGVtXCIpO1xuICAgICAgICAgICAgdGhpcy5za2lsbGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNraWxsLWl0ZW1cIik7XG5cbiAgICAgICAgICAgIHRoaXMuaG9tZWFyZWEuZnJvbVRvKHRoaXMuaG9tZXRpdGxlLCAxLCB7IG9wYWNpdHk6IDAsIHk6IC00MCB9LCB7IG9wYWNpdHk6IDEsIHk6IDAgfSwgMC40KTtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdGFyZWEuc3RhZ2dlckZyb21Ubyh0aGlzLnByb2plY3RpdGVtLCAwLjIsIHsgc2NhbGU6IDAsIHk6IDIwIH0sIHsgc2NhbGU6IDEsIHk6IDAgfSwgMC4yKTtcbiAgICAgICAgICAgIHRoaXMuc2tpbGxhcmVhLnN0YWdnZXJGcm9tVG8odGhpcy5za2lsbGl0ZW0sIDAuMiwgeyBvcGFjaXR5OiAwLCB4OiAtMjAgfSwgeyBvcGFjaXR5OiAxLCB4OiAwIH0sIDAuMik7XG5cbiAgICAgICAgICAgIHZhciBtYWluID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHsgdHJpZ2dlckVsZW1lbnQ6ICcjaG9tZScsIHJldmVyc2U6IGZhbHNlIH0pLnNldFR3ZWVuKHRoaXMuaG9tZWFyZWEpLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XG5cbiAgICAgICAgICAgIHZhciBwcm9qZWN0ID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHsgdHJpZ2dlckVsZW1lbnQ6ICcjcHJvamVjdHMnLCByZXZlcnNlOiBmYWxzZSB9KS5zZXRUd2Vlbih0aGlzLnByb2plY3RhcmVhKS5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xuXG4gICAgICAgICAgICB2YXIgc2tpbGwgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoeyB0cmlnZ2VyRWxlbWVudDogJyNwcm9qZWN0cycsIHJldmVyc2U6IGZhbHNlIH0pLnNldFR3ZWVuKHRoaXMuc2tpbGxhcmVhKS5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEhvbWU7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEhvbWU7XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX0RldmljZUluZm8gPSByZXF1aXJlKCcuLi90b29scy9EZXZpY2VJbmZvJyk7XG5cbnZhciBfRGV2aWNlSW5mbzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EZXZpY2VJbmZvKTtcblxudmFyIF9IZWFkZXIgPSByZXF1aXJlKCcuLi9wYXJ0aWFscy9IZWFkZXInKTtcblxudmFyIF9IZWFkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSGVhZGVyKTtcblxudmFyIF9Gb290ZXIgPSByZXF1aXJlKCcuLi9wYXJ0aWFscy9Gb290ZXInKTtcblxudmFyIF9Gb290ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRm9vdGVyKTtcblxudmFyIF9Ib21lID0gcmVxdWlyZSgnLi9Ib21lJyk7XG5cbnZhciBfSG9tZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Ib21lKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIE1haW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFpbigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1haW4pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdpbml0Jyk7XG4gICAgICAgIHRoaXMucmVhZHkoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTWFpbiwgW3tcbiAgICAgICAga2V5OiAncmVhZHknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgICAgICAgICBfRGV2aWNlSW5mbzIuZGVmYXVsdC5jaGVjaygpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzVG91Y2gpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcInRvdWNoXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzSUUpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImllXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzQW5kcm9pZCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiYW5kcm9pZFwiKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc0lPUykgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaW9zXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzRmlyZWZveCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiZmlyZWZveFwiKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc1NhZmFyaSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwic2FmYXJpXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzQ2hyb21lKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJjaHJvbWVcIik7XG4gICAgICAgICAgICAvLyBsZXQgcHJlbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWxvYWRlcicpO1xuICAgICAgICAgICAgLy8gVHdlZW5MaXRlLnRvKHByZWxvYWRlciwgMC41LHtjc3M6e2F1dG9BbHBoYTowfSxkZWxheTowLjR9KTtcbiAgICAgICAgICAgIC8vIFR3ZWVuTGl0ZS5zZXQocHJlbG9hZGVyLHtjc3M6e2Rpc3BsYXk6XCJibG9ja1wifSxkZWxheTowLjh9KTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gbmV3IF9IZWFkZXIyLmRlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gbmV3IF9Gb290ZXIyLmRlZmF1bHQoKTtcblxuICAgICAgICAgICAgc3dpdGNoICgkKCdib2R5IHNlY3Rpb24nKS5hdHRyKFwiZGF0YS10ZW1wbGF0ZVwiKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJob21lXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IG5ldyBfSG9tZTIuZGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBNYWluO1xufSgpO1xuXG5uZXcgTWFpbigpO1xuXG59LHtcIi4uL3BhcnRpYWxzL0Zvb3RlclwiOjMsXCIuLi9wYXJ0aWFscy9IZWFkZXJcIjo0LFwiLi4vdG9vbHMvRGV2aWNlSW5mb1wiOjUsXCIuL0hvbWVcIjoxfV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIEZvb3RlciA9IGZ1bmN0aW9uIEZvb3RlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRm9vdGVyKTtcblxuICAgIGNvbnNvbGUubG9nKCdGb290ZXInKTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEZvb3RlcjtcblxufSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIEhlYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIZWFkZXIoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIZWFkZXIpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdIZWFkZXInKTtcbiAgICAgICAgdGhpcy5tZW51cmVzaXplKCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm1lbnVyZXNpemUuYmluZCh0aGlzKSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmFjdGl2ZU9uU2Nyb2xsLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmFuY2hvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0gPiBhJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hbmNob3IubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5hbmNob3JKdW1wLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEhlYWRlciwgW3tcbiAgICAgICAga2V5OiAnbWVudXJlc2l6ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZW51cmVzaXplKCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gMTAwO1xuICAgICAgICAgICAgdGhpcy5uYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFzdGhlYWQnKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2LmNsYXNzTGlzdC5hZGQoJ3NtYWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0IDw9IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uYXYuY2xhc3NMaXN0LnJlbW92ZSgnc21hbGwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYW5jaG9ySnVtcCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmNob3JKdW1wKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6ICQoZXZlbnQudGFyZ2V0Lmhhc2gpLm9mZnNldCgpLnRvcCAtIDQ0IH0sIDUwMCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FjdGl2ZU9uU2Nyb2xsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFjdGl2ZU9uU2Nyb2xsKCkge1xuICAgICAgICAgICAgdmFyIHBvcyA9IHdpbmRvdy5wYWdlWU9mZnNldDtcbiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gc2VjdGlvbnNbaV0uZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciBzZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICAgICAgICAgIGlmIChzZWN0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlY3Rwb3MgPSAkKHNlY3QpLnBvc2l0aW9uKCkudG9wIC0gMTAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjdHBvcyA8PSBwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNuYXZiYXIgdWwgbGkuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhciB1bCBsaS4nICsgaWQgKyAnJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEhlYWRlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gSGVhZGVyO1xuXG59LHt9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0XHR2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBEZXZpY2VJbmZvID0gZnVuY3Rpb24gKCkge1xuXHRcdGZ1bmN0aW9uIERldmljZUluZm8oKSB7XG5cdFx0XHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEZXZpY2VJbmZvKTtcblx0XHR9XG5cblx0XHRfY3JlYXRlQ2xhc3MoRGV2aWNlSW5mbywgbnVsbCwgW3tcblx0XHRcdFx0a2V5OiBcImNoZWNrXCIsXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBjaGVjaygpIHtcblxuXHRcdFx0XHRcdFx0Ly9GRlxuXHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc0ZpcmVmb3ggPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImZpcmVmb3hcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcblx0XHRcdFx0XHRcdERldmljZUluZm8uaXNDaHJvbWUgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNocm9tZVwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc1NhZmFyaSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY2hyb21lXCIpIDw9IC0xICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwic2FmYXJpXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzQW5kcm9pZCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiYW5kcm9pZFwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc0lPUyA9IC9pUGFkfGlQaG9uZXxpUG9kLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmICF3aW5kb3cuTVNTdHJlYW07XG5cblx0XHRcdFx0XHRcdC8vSUVcblx0XHRcdFx0XHRcdERldmljZUluZm8uaXNJRSA9IERldmljZUluZm8uZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24oKSAhPSAtMTtcblxuXHRcdFx0XHRcdFx0Ly8gSVMgVE9VQ0hcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJUb3VjaEV2ZW50XCIpO1xuXHRcdFx0XHRcdFx0XHRcdERldmljZUluZm8uaXNUb3VjaCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc1RvdWNoID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHR9LCB7XG5cdFx0XHRcdGtleTogXCJnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvblwiLFxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24oKSB7XG5cblx0XHRcdFx0XHRcdHZhciBydiA9IC0xO1xuXHRcdFx0XHRcdFx0dmFyIHJlID0gbnVsbDtcblx0XHRcdFx0XHRcdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cblx0XHRcdFx0XHRcdGlmIChuYXZpZ2F0b3IuYXBwTmFtZSA9PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJykge1xuXG5cdFx0XHRcdFx0XHRcdFx0cmUgPSBuZXcgUmVnRXhwKFwiTVNJRSAoWzAtOV17MSx9W1xcLjAtOV17MCx9KVwiKTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChyZS5leGVjKHVhKSAhPT0gbnVsbCkgcnYgPSBwYXJzZUZsb2F0KFJlZ0V4cC4kMSk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG5hdmlnYXRvci5hcHBOYW1lID09ICdOZXRzY2FwZScpIHtcblxuXHRcdFx0XHRcdFx0XHRcdHJlID0gbmV3IFJlZ0V4cChcIlRyaWRlbnQvLipydjooWzAtOV17MSx9W1xcLjAtOV17MCx9KVwiKTtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChyZS5leGVjKHVhKSAhPT0gbnVsbCkgcnYgPSBwYXJzZUZsb2F0KFJlZ0V4cC4kMSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHJldHVybiBydjtcblx0XHRcdFx0fVxuXHRcdH1dKTtcblxuXHRcdHJldHVybiBEZXZpY2VJbmZvO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBEZXZpY2VJbmZvO1xuXG59LHt9XX0se30sWzJdKVxuXG4iLCJjbGFzcyBIb21lIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0hvbWUnKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcigpO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBzbGlkZXIoKXtcclxuICAgIFx0JChcIiNzbGlkZXItaG9tZVwiKS5yZXNwb25zaXZlU2xpZGVzKHtcclxuICAgICAgICAgICAgbWFudWFsQ29udHJvbHM6ICcjc2xpZGVyLXBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICB0aW1lb3V0OiA2MDAwLFxyXG4gICAgICAgICAgICBhdXRvOiB0cnVlLFxyXG4gICAgICAgICAgICBiZWZvcmU6IGZ1bmN0aW9uKGluZGV4KXtcclxuICAgIFx0XHRcdHRoaXMuaG9tZXRpdGxlID0gJChcIi5ob21lLWNvbnRlbnQgaDJcIikuZXEoaW5kZXgpO1xyXG4gICAgICAgICAgICAgIFx0VHdlZW5MaXRlLmZyb21Ubyh0aGlzLmhvbWV0aXRsZSwgMSwgeyBvcGFjaXR5OiAwLCB5Oi00MCB9LCB7IG9wYWNpdHk6IDEsIHk6MCB9LCAwLjQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYW5pbWF0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5ob21lYXJlYSAgICBcdD0gbmV3IFRpbWVsaW5lTWF4KCk7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0YXJlYSAgICA9IG5ldyBUaW1lbGluZU1heCgpO1xyXG4gICAgICAgIHRoaXMuc2tpbGxhcmVhICAgIFx0PSBuZXcgVGltZWxpbmVNYXgoKTtcclxuXHJcbiAgICAgICAgdGhpcy5ob21ldGl0bGUgXHRcdD0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob21lLWNvbnRlbnQgaDJcIik7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0aXRlbSBcdD0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ncmlkLWl0ZW1cIik7XHJcbiAgICAgICAgdGhpcy5za2lsbGl0ZW0gXHRcdD0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5za2lsbC1pdGVtXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaG9tZWFyZWEuZnJvbVRvKHRoaXMuaG9tZXRpdGxlLCAxLCB7IG9wYWNpdHk6IDAsIHk6LTQwIH0sIHsgb3BhY2l0eTogMSwgeTowIH0sIDAuNCk7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0YXJlYS5zdGFnZ2VyRnJvbVRvKHRoaXMucHJvamVjdGl0ZW0sIDAuMiwgeyBzY2FsZTogMCwgeToyMH0sIHsgc2NhbGU6IDEsIHk6MCB9LCAwLjIpO1xyXG4gICAgICAgIHRoaXMuc2tpbGxhcmVhLnN0YWdnZXJGcm9tVG8odGhpcy5za2lsbGl0ZW0sIDAuMiwgeyBvcGFjaXR5OiAwLCB4Oi0yMH0sIHsgb3BhY2l0eTogMSwgeDowIH0sIDAuMik7XHJcbiAgICAgICBcclxuICAgICAgICBsZXQgbWFpbiA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7dHJpZ2dlckVsZW1lbnQ6ICcjaG9tZScsIHJldmVyc2U6IGZhbHNlLH0pXHJcbiAgICAgICAgLnNldFR3ZWVuKHRoaXMuaG9tZWFyZWEpXHJcbiAgICAgICAgLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XHJcblxyXG4gICAgICAgIGxldCBwcm9qZWN0ID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogJyNwcm9qZWN0cycsIHJldmVyc2U6IGZhbHNlLH0pXHJcbiAgICAgICAgLnNldFR3ZWVuKHRoaXMucHJvamVjdGFyZWEpXHJcbiAgICAgICAgLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XHJcblxyXG4gICAgICAgIGxldCBza2lsbCA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7dHJpZ2dlckVsZW1lbnQ6ICcjcHJvamVjdHMnLCByZXZlcnNlOiBmYWxzZSx9KVxyXG4gICAgICAgIC5zZXRUd2Vlbih0aGlzLnNraWxsYXJlYSlcclxuICAgICAgICAuYWRkVG8odGhpcy5jb250cm9sbGVyKTtcclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIb21lOyIsImltcG9ydCBEZXZpY2VJbmZvIGZyb20gJy4uL3Rvb2xzL0RldmljZUluZm8nO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuLi9wYXJ0aWFscy9IZWFkZXInO1xuaW1wb3J0IEZvb3RlciBmcm9tICcuLi9wYXJ0aWFscy9Gb290ZXInO1xuXG5pbXBvcnQgSG9tZSBmcm9tICcuL0hvbWUnO1xuXG5jbGFzcyBNYWluIHtcblxuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2luaXQnKTtcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xuICAgIH1cblxuICAgIHJlYWR5KCkge1xuICAgIFx0RGV2aWNlSW5mby5jaGVjaygpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzVG91Y2gpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcInRvdWNoXCIpO1xuICAgIFx0aWYoRGV2aWNlSW5mby5pc0lFKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJpZVwiKTtcbiAgICBcdGlmKERldmljZUluZm8uaXNBbmRyb2lkKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJhbmRyb2lkXCIpO1xuICAgIFx0aWYoRGV2aWNlSW5mby5pc0lPUykgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaW9zXCIpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzRmlyZWZveCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiZmlyZWZveFwiKTtcbiAgICAgICAgaWYoRGV2aWNlSW5mby5pc1NhZmFyaSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwic2FmYXJpXCIpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzQ2hyb21lKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJjaHJvbWVcIik7XG4gICAgICAgIC8vIGxldCBwcmVsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlbG9hZGVyJyk7XG4gICAgICAgIC8vIFR3ZWVuTGl0ZS50byhwcmVsb2FkZXIsIDAuNSx7Y3NzOnthdXRvQWxwaGE6MH0sZGVsYXk6MC40fSk7XG4gICAgICAgIC8vIFR3ZWVuTGl0ZS5zZXQocHJlbG9hZGVyLHtjc3M6e2Rpc3BsYXk6XCJibG9ja1wifSxkZWxheTowLjh9KTtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBuZXcgSGVhZGVyKCk7XG4gICAgICAgIHRoaXMuZm9vdGVyID0gbmV3IEZvb3RlcigpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoKCQoJ2JvZHkgc2VjdGlvbicpLmF0dHIoXCJkYXRhLXRlbXBsYXRlXCIpKXtcbiAgICAgICAgICAgIGNhc2UgXCJob21lXCI6IHRoaXMucGFnZSA9IG5ldyBIb21lKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5cbm5ldyBNYWluKCk7IiwiY2xhc3MgRm9vdGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0Zvb3RlcicpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9vdGVyOyIsImNsYXNzIEhlYWRlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdIZWFkZXInKTtcclxuICAgICAgICB0aGlzLm1lbnVyZXNpemUoKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5tZW51cmVzaXplLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmFjdGl2ZU9uU2Nyb2xsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYW5jaG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbSA+IGEnKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYW5jaG9yLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgXHR0aGlzLmFuY2hvcltpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYW5jaG9ySnVtcC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1lbnVyZXNpemUoKXtcclxuICAgICAgICBjb25zdCBzdGFydCA9IDEwMDtcclxuICAgICAgICB0aGlzLm5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXN0aGVhZCcpO1xyXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzdGFydCl7IFxyXG4gICAgICAgICAgICB0aGlzLm5hdi5jbGFzc0xpc3QuYWRkKCdzbWFsbCcpOyBcclxuICAgICAgICB9IFxyXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPD0gc3RhcnQpe1xyXG4gICAgICAgICAgICB0aGlzLm5hdi5jbGFzc0xpc3QucmVtb3ZlKCdzbWFsbCcpOyBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYW5jaG9ySnVtcChldmVudCl7XHJcbiAgICBcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAkKGV2ZW50LnRhcmdldC5oYXNoKS5vZmZzZXQoKS50b3AgLSA0NH0sIDUwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0aXZlT25TY3JvbGwoKXtcclxuICAgICAgICBsZXQgcG9zID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG4gICAgICAgIGxldCBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaWQgPSBzZWN0aW9uc1tpXS5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICAgICAgICAgIGxldCBzZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgICAgICBpZiAoc2VjdCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VjdHBvcyA9ICQoc2VjdCkucG9zaXRpb24oKS50b3AgLSAxMDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VjdHBvcyA8PSBwb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjbmF2YmFyIHVsIGxpLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjbmF2YmFyIHVsIGxpLicraWQrJycpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjsiLCJjbGFzcyBEZXZpY2VJbmZvIHtcclxuXHJcblx0c3RhdGljIGNoZWNrKCkge1xyXG5cclxuXHRcdC8vRkZcclxuXHRcdERldmljZUluZm8uaXNGaXJlZm94ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJmaXJlZm94XCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XHJcblx0XHREZXZpY2VJbmZvLmlzQ2hyb21lID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJjaHJvbWVcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcclxuXHRcdERldmljZUluZm8uaXNTYWZhcmkgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNocm9tZVwiKSA8PSAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInNhZmFyaVwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0RGV2aWNlSW5mby5pc0FuZHJvaWQgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImFuZHJvaWRcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcclxuXHRcdERldmljZUluZm8uaXNJT1MgPSAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtO1xyXG5cclxuXHRcdC8vSUVcclxuXHRcdERldmljZUluZm8uaXNJRSA9IERldmljZUluZm8uZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24oKSAhPSAtMTtcclxuXHJcblx0XHQvLyBJUyBUT1VDSFxyXG5cdFx0dHJ5IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJUb3VjaEV2ZW50XCIpO1xyXG4gICAgICAgICAgICBEZXZpY2VJbmZvLmlzVG91Y2ggPSB0cnVlO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIERldmljZUluZm8uaXNUb3VjaCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24gKCkge1xyXG5cclxuICAgICAgXHRsZXQgcnYgPSAtMTtcclxuICAgICAgXHRsZXQgcmUgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuXHJcblx0XHRpZiAobmF2aWdhdG9yLmFwcE5hbWUgPT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpXHJcblx0XHR7XHJcblxyXG5cdFx0XHRyZSAgPSBuZXcgUmVnRXhwKFwiTVNJRSAoWzAtOV17MSx9W1xcLjAtOV17MCx9KVwiKTtcclxuXHJcblx0XHRcdGlmIChyZS5leGVjKHVhKSAhPT0gbnVsbCkgcnYgPSBwYXJzZUZsb2F0KCBSZWdFeHAuJDEgKTtcclxuXHJcblx0XHR9IGVsc2UgaWYgKG5hdmlnYXRvci5hcHBOYW1lID09ICdOZXRzY2FwZScpIHtcclxuXHJcblx0XHRcdHJlICA9IG5ldyBSZWdFeHAoXCJUcmlkZW50Ly4qcnY6KFswLTldezEsfVtcXC4wLTldezAsfSlcIik7XHJcblxyXG5cdFx0XHRpZiAocmUuZXhlYyh1YSkgIT09IG51bGwpIHJ2ID0gcGFyc2VGbG9hdCggUmVnRXhwLiQxICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJ2O1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGV2aWNlSW5mbzsiXX0=
