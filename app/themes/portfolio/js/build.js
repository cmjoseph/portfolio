!function e(t,n,o){function r(a,l){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e),console.log("Home"),this.controller=new ScrollMagic.Controller,this.animation(),this.slider()}return r(e,[{key:"slider",value:function(){$("#slider-home").responsiveSlides({manualControls:"#slider-pagination",timeout:6e3,auto:!0,before:function(e){this.hometitle=$(".home-content h2").eq(e),TweenLite.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4)}})}},{key:"animation",value:function(){this.homearea=new TimelineMax,this.projectarea=new TimelineMax,this.skillarea=new TimelineMax,this.hometitle=document.querySelector(".home-content h2"),this.projectitem=document.querySelectorAll(".grid-item"),this.skillitem=document.querySelectorAll(".skill-item"),this.homearea.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4),this.projectarea.staggerFromTo(this.projectitem,.2,{scale:0,y:20},{scale:1,y:0},.2),this.skillarea.staggerFromTo(this.skillitem,.2,{opacity:0,x:-20},{opacity:1,x:0},.2);new ScrollMagic.Scene({triggerElement:"#home",reverse:!1}).setTween(this.homearea).addTo(this.controller),new ScrollMagic.Scene({triggerElement:"#projects",reverse:!1}).setTween(this.projectarea).addTo(this.controller),new ScrollMagic.Scene({triggerElement:"#projects",reverse:!1}).setTween(this.skillarea).addTo(this.controller)}}]),e}();n["default"]=i},{}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=e("../tools/DeviceInfo"),l=o(a),s=e("../partials/Header"),c=o(s),u=e("../partials/Footer"),f=o(u),d=e("./Home"),h=o(d),m=e("./Single"),p=o(m),g=function(){function e(){r(this,e),console.log("init"),this.ready()}return i(e,[{key:"ready",value:function(){switch(l["default"].check(),l["default"].isTouch&&document.body.classList.add("touch"),l["default"].isIE&&document.body.classList.add("ie"),l["default"].isAndroid&&document.body.classList.add("android"),l["default"].isIOS&&document.body.classList.add("ios"),l["default"].isFirefox&&document.body.classList.add("firefox"),l["default"].isSafari&&document.body.classList.add("safari"),l["default"].isChrome&&document.body.classList.add("chrome"),this.header=new c["default"],this.footer=new f["default"],$("body section").attr("data-template")){case"home":this.page=new h["default"];break;case"single":this.page=new p["default"]}}}]),e}();new g},{"../partials/Footer":4,"../partials/Header":5,"../tools/DeviceInfo":6,"./Home":1,"./Single":3}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e),console.log("Single"),this.controller=new ScrollMagic.Controller,this.slider()}return r(e,[{key:"slider",value:function(){$("#slider-single").responsiveSlides({manualControls:"#slider-pagination",timeout:6e3,auto:!0,before:function(e){this.hometitle=$(".slider-content h2").eq(e),TweenLite.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4)}})}},{key:"animation",value:function(){this.homearea=new TimelineMax,this.projectarea=new TimelineMax,this.skillarea=new TimelineMax,this.hometitle=document.querySelector(".home-content h2"),this.projectitem=document.querySelectorAll(".grid-item"),this.skillitem=document.querySelectorAll(".skill-item"),this.homearea.fromTo(this.hometitle,1,{opacity:0,y:-40},{opacity:1,y:0},.4),this.projectarea.staggerFromTo(this.projectitem,.2,{scale:0,y:20},{scale:1,y:0},.2),this.skillarea.staggerFromTo(this.skillitem,.2,{opacity:0,x:-20},{opacity:1,x:0},.2);new ScrollMagic.Scene({triggerElement:"#home",reverse:!1}).setTween(this.homearea).addTo(this.controller),new ScrollMagic.Scene({triggerElement:"#projects",reverse:!1}).setTween(this.projectarea).addTo(this.controller),new ScrollMagic.Scene({triggerElement:"#projects",reverse:!1}).setTween(this.skillarea).addTo(this.controller)}}]),e}();n["default"]=i},{}],4:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function i(){o(this,i),console.log("Footer")};n["default"]=r},{}],5:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e),console.log("Header"),this.menuresize(),window.addEventListener("scroll",this.menuresize.bind(this)),window.addEventListener("scroll",this.activeOnScroll.bind(this)),this.anchor=document.querySelectorAll(".menu-item > a");for(var t=0;t<this.anchor.length;t++)this.anchor[t].addEventListener("click",this.anchorJump.bind(this))}return r(e,[{key:"menuresize",value:function(){var e=100;this.nav=document.getElementById("masthead"),window.pageYOffset>e&&this.nav.classList.add("small"),window.pageYOffset<=e&&this.nav.classList.remove("small")}},{key:"anchorJump",value:function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(e.target.hash).offset().top-44},500)}},{key:"activeOnScroll",value:function(){for(var e=window.pageYOffset,t=document.querySelectorAll(".section"),n=0;n<t.length;n++){var o=t[n].getAttribute("id"),r=document.getElementById(o);if(null!=r){var i=$(r).position().top-100;e>=i&&($("#navbar ul li.active").removeClass("active"),$("#navbar ul li."+o).addClass("active"))}}}}]),e}();n["default"]=i},{}],6:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e)}return r(e,null,[{key:"check",value:function(){e.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,e.isChrome=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,e.isSafari=navigator.userAgent.toLowerCase().indexOf("chrome")<=-1&&navigator.userAgent.toLowerCase().indexOf("safari")>-1,e.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>-1,e.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e.isIE=-1!=e.getInternetExplorerVersion();try{document.createEvent("TouchEvent"),e.isTouch=!0}catch(t){e.isTouch=!1}}},{key:"getInternetExplorerVersion",value:function(){var e=-1,t=null,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&(e=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&(e=parseFloat(RegExp.$1))),e}}]),e}();n["default"]=i},{}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC5qcyIsInNyYy9qcy9jdXN0b20vSG9tZS5qcyIsInNyYy9qcy9jdXN0b20vTWFpbi5qcyIsInNyYy9qcy9jdXN0b20vU2luZ2xlLmpzIiwic3JjL2pzL3BhcnRpYWxzL0Zvb3Rlci5qcyIsInNyYy9qcy9wYXJ0aWFscy9IZWFkZXIuanMiLCJzcmMvanMvdG9vbHMvRGV2aWNlSW5mby5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJIb21lIiwidGhpcyIsImNvbnNvbGUiLCJsb2ciLCJjb250cm9sbGVyIiwiU2Nyb2xsTWFnaWMiLCJDb250cm9sbGVyIiwiYW5pbWF0aW9uIiwic2xpZGVyIiwiJCIsInJlc3BvbnNpdmVTbGlkZXMiLCJtYW51YWxDb250cm9scyIsInRpbWVvdXQiLCJhdXRvIiwiYmVmb3JlIiwiaW5kZXgiLCJob21ldGl0bGUiLCJlcSIsIlR3ZWVuTGl0ZSIsImZyb21UbyIsIm9wYWNpdHkiLCJ5IiwiaG9tZWFyZWEiLCJUaW1lbGluZU1heCIsInByb2plY3RhcmVhIiwic2tpbGxhcmVhIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvamVjdGl0ZW0iLCJxdWVyeVNlbGVjdG9yQWxsIiwic2tpbGxpdGVtIiwic3RhZ2dlckZyb21UbyIsInNjYWxlIiwieCIsIlNjZW5lIiwidHJpZ2dlckVsZW1lbnQiLCJyZXZlcnNlIiwic2V0VHdlZW4iLCJhZGRUbyIsIjIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfRGV2aWNlSW5mbyIsIl9EZXZpY2VJbmZvMiIsIl9IZWFkZXIiLCJfSGVhZGVyMiIsIl9Gb290ZXIiLCJfRm9vdGVyMiIsIl9Ib21lIiwiX0hvbWUyIiwiX1NpbmdsZSIsIl9TaW5nbGUyIiwiTWFpbiIsInJlYWR5IiwiY2hlY2siLCJpc1RvdWNoIiwiYm9keSIsImNsYXNzTGlzdCIsImFkZCIsImlzSUUiLCJpc0FuZHJvaWQiLCJpc0lPUyIsImlzRmlyZWZveCIsImlzU2FmYXJpIiwiaXNDaHJvbWUiLCJoZWFkZXIiLCJmb290ZXIiLCJhdHRyIiwicGFnZSIsIi4uL3BhcnRpYWxzL0Zvb3RlciIsIi4uL3BhcnRpYWxzL0hlYWRlciIsIi4uL3Rvb2xzL0RldmljZUluZm8iLCIuL0hvbWUiLCIuL1NpbmdsZSIsIjMiLCJTaW5nbGUiLCI0IiwiRm9vdGVyIiwiNSIsIkhlYWRlciIsIm1lbnVyZXNpemUiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiYmluZCIsImFjdGl2ZU9uU2Nyb2xsIiwiYW5jaG9yIiwiYW5jaG9ySnVtcCIsInN0YXJ0IiwibmF2IiwiZ2V0RWxlbWVudEJ5SWQiLCJwYWdlWU9mZnNldCIsInJlbW92ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiaGFzaCIsIm9mZnNldCIsInRvcCIsInBvcyIsInNlY3Rpb25zIiwiaWQiLCJnZXRBdHRyaWJ1dGUiLCJzZWN0Iiwic2VjdHBvcyIsInBvc2l0aW9uIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIjYiLCJEZXZpY2VJbmZvIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwidGVzdCIsIk1TU3RyZWFtIiwiZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24iLCJjcmVhdGVFdmVudCIsInJ2IiwicmUiLCJ1YSIsImFwcE5hbWUiLCJSZWdFeHAiLCJleGVjIiwicGFyc2VGbG9hdCIsIiQxIl0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFBQUEsR0FBQUosR0FBQSxFQUFBLElBQUFLLEdBQUEsR0FBQUMsT0FBQSx1QkFBQU4sRUFBQSxJQUFBLE1BQUFLLEdBQUFFLEtBQUEsbUJBQUFGLEVBQUEsR0FBQUcsR0FBQVgsRUFBQUcsSUFBQVMsV0FBQWIsR0FBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsR0FBQUUsR0FBQUQsRUFBQUksR0FBQSxHQUFBTCxFQUFBLE9BQUFJLEdBQUFGLEVBQUFBLEVBQUFGLElBQUFhLEVBQUFBLEVBQUFDLFFBQUFkLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsTUFBQUQsR0FBQUcsR0FBQVMsUUFBQSxJQUFBLEdBQUFMLEdBQUEsa0JBQUFELFVBQUFBLFFBQUFILEVBQUEsRUFBQUEsRUFBQUYsRUFBQWEsT0FBQVgsSUFBQUQsRUFBQUQsRUFBQUUsR0FBQSxPQUFBRCxLQUFBYSxHQUFBLFNBQUFULEVBQUFVLEVBQUFKLEdDQ0EsWUFRQSxTQUFTSyxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQU5oSEMsT0FBT0MsZUFBZVYsRUFBUyxjQUMzQlcsT0FBTyxHQUdYLElBQUlDLEdBQWUsV0FBYyxRQUFT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QUFNLEdBQUlHLFFBQU8sOEJBRUcsT0FBaEJILEVBQUdJLEtBQUtILEtBQWNGLEVBQUtNLFdBQVlGLE9BQU9HLE1BRW5CLFlBQXJCZixVQUFVVyxVQUVwQkYsRUFBTSxHQUFJRyxRQUFPLHNDQUVHLE9BQWhCSCxFQUFHSSxLQUFLSCxLQUFjRixFQUFLTSxXQUFZRixPQUFPRyxNQUc1Q1AsTU51U0FULElBR1R2SSxHQUFBQSxXTXJTZXVJLFlOdVNKIiwiZmlsZSI6ImJ1aWxkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIEhvbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSG9tZSgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhvbWUpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdIb21lJyk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKCk7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uKCk7XG4gICAgICAgIHRoaXMuc2xpZGVyKCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEhvbWUsIFt7XG4gICAgICAgIGtleTogJ3NsaWRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzbGlkZXIoKSB7XG4gICAgICAgICAgICAkKFwiI3NsaWRlci1ob21lXCIpLnJlc3BvbnNpdmVTbGlkZXMoe1xuICAgICAgICAgICAgICAgIG1hbnVhbENvbnRyb2xzOiAnI3NsaWRlci1wYWdpbmF0aW9uJyxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiA2MDAwLFxuICAgICAgICAgICAgICAgIGF1dG86IHRydWUsXG4gICAgICAgICAgICAgICAgYmVmb3JlOiBmdW5jdGlvbiBiZWZvcmUoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob21ldGl0bGUgPSAkKFwiLmhvbWUtY29udGVudCBoMlwiKS5lcShpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIFR3ZWVuTGl0ZS5mcm9tVG8odGhpcy5ob21ldGl0bGUsIDEsIHsgb3BhY2l0eTogMCwgeTogLTQwIH0sIHsgb3BhY2l0eTogMSwgeTogMCB9LCAwLjQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhbmltYXRpb24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYW5pbWF0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5ob21lYXJlYSA9IG5ldyBUaW1lbGluZU1heCgpO1xuICAgICAgICAgICAgdGhpcy5wcm9qZWN0YXJlYSA9IG5ldyBUaW1lbGluZU1heCgpO1xuICAgICAgICAgICAgdGhpcy5za2lsbGFyZWEgPSBuZXcgVGltZWxpbmVNYXgoKTtcblxuICAgICAgICAgICAgdGhpcy5ob21ldGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhvbWUtY29udGVudCBoMlwiKTtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdGl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmdyaWQtaXRlbVwiKTtcbiAgICAgICAgICAgIHRoaXMuc2tpbGxpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5za2lsbC1pdGVtXCIpO1xuXG4gICAgICAgICAgICB0aGlzLmhvbWVhcmVhLmZyb21Ubyh0aGlzLmhvbWV0aXRsZSwgMSwgeyBvcGFjaXR5OiAwLCB5OiAtNDAgfSwgeyBvcGFjaXR5OiAxLCB5OiAwIH0sIDAuNCk7XG4gICAgICAgICAgICB0aGlzLnByb2plY3RhcmVhLnN0YWdnZXJGcm9tVG8odGhpcy5wcm9qZWN0aXRlbSwgMC4yLCB7IHNjYWxlOiAwLCB5OiAyMCB9LCB7IHNjYWxlOiAxLCB5OiAwIH0sIDAuMik7XG4gICAgICAgICAgICB0aGlzLnNraWxsYXJlYS5zdGFnZ2VyRnJvbVRvKHRoaXMuc2tpbGxpdGVtLCAwLjIsIHsgb3BhY2l0eTogMCwgeDogLTIwIH0sIHsgb3BhY2l0eTogMSwgeDogMCB9LCAwLjIpO1xuXG4gICAgICAgICAgICB2YXIgbWFpbiA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7IHRyaWdnZXJFbGVtZW50OiAnI2hvbWUnLCByZXZlcnNlOiBmYWxzZSB9KS5zZXRUd2Vlbih0aGlzLmhvbWVhcmVhKS5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xuXG4gICAgICAgICAgICB2YXIgcHJvamVjdCA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7IHRyaWdnZXJFbGVtZW50OiAnI3Byb2plY3RzJywgcmV2ZXJzZTogZmFsc2UgfSkuc2V0VHdlZW4odGhpcy5wcm9qZWN0YXJlYSkuYWRkVG8odGhpcy5jb250cm9sbGVyKTtcblxuICAgICAgICAgICAgdmFyIHNraWxsID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHsgdHJpZ2dlckVsZW1lbnQ6ICcjcHJvamVjdHMnLCByZXZlcnNlOiBmYWxzZSB9KS5zZXRUd2Vlbih0aGlzLnNraWxsYXJlYSkuYWRkVG8odGhpcy5jb250cm9sbGVyKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBIb21lO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBIb21lO1xuXG59LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9EZXZpY2VJbmZvID0gcmVxdWlyZSgnLi4vdG9vbHMvRGV2aWNlSW5mbycpO1xuXG52YXIgX0RldmljZUluZm8yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGV2aWNlSW5mbyk7XG5cbnZhciBfSGVhZGVyID0gcmVxdWlyZSgnLi4vcGFydGlhbHMvSGVhZGVyJyk7XG5cbnZhciBfSGVhZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0hlYWRlcik7XG5cbnZhciBfRm9vdGVyID0gcmVxdWlyZSgnLi4vcGFydGlhbHMvRm9vdGVyJyk7XG5cbnZhciBfRm9vdGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Zvb3Rlcik7XG5cbnZhciBfSG9tZSA9IHJlcXVpcmUoJy4vSG9tZScpO1xuXG52YXIgX0hvbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSG9tZSk7XG5cbnZhciBfU2luZ2xlID0gcmVxdWlyZSgnLi9TaW5nbGUnKTtcblxudmFyIF9TaW5nbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU2luZ2xlKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIE1haW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFpbigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1haW4pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdpbml0Jyk7XG4gICAgICAgIHRoaXMucmVhZHkoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTWFpbiwgW3tcbiAgICAgICAga2V5OiAncmVhZHknLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgICAgICAgICBfRGV2aWNlSW5mbzIuZGVmYXVsdC5jaGVjaygpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzVG91Y2gpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcInRvdWNoXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzSUUpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImllXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzQW5kcm9pZCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiYW5kcm9pZFwiKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc0lPUykgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaW9zXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzRmlyZWZveCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiZmlyZWZveFwiKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc1NhZmFyaSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwic2FmYXJpXCIpO1xuICAgICAgICAgICAgaWYgKF9EZXZpY2VJbmZvMi5kZWZhdWx0LmlzQ2hyb21lKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJjaHJvbWVcIik7XG4gICAgICAgICAgICAvLyBsZXQgcHJlbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZWxvYWRlcicpO1xuICAgICAgICAgICAgLy8gVHdlZW5MaXRlLnRvKHByZWxvYWRlciwgMC41LHtjc3M6e2F1dG9BbHBoYTowfSxkZWxheTowLjR9KTtcbiAgICAgICAgICAgIC8vIFR3ZWVuTGl0ZS5zZXQocHJlbG9hZGVyLHtjc3M6e2Rpc3BsYXk6XCJibG9ja1wifSxkZWxheTowLjh9KTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyID0gbmV3IF9IZWFkZXIyLmRlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuZm9vdGVyID0gbmV3IF9Gb290ZXIyLmRlZmF1bHQoKTtcblxuICAgICAgICAgICAgc3dpdGNoICgkKCdib2R5IHNlY3Rpb24nKS5hdHRyKFwiZGF0YS10ZW1wbGF0ZVwiKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJob21lXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IG5ldyBfSG9tZTIuZGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IG5ldyBfU2luZ2xlMi5kZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIE1haW47XG59KCk7XG5cbm5ldyBNYWluKCk7XG5cbn0se1wiLi4vcGFydGlhbHMvRm9vdGVyXCI6NCxcIi4uL3BhcnRpYWxzL0hlYWRlclwiOjUsXCIuLi90b29scy9EZXZpY2VJbmZvXCI6NixcIi4vSG9tZVwiOjEsXCIuL1NpbmdsZVwiOjN9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU2luZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNpbmdsZSgpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNpbmdsZSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1NpbmdsZScpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcigpO1xuICAgICAgICAvLyB0aGlzLmFuaW1hdGlvbigpO1xuICAgICAgICB0aGlzLnNsaWRlcigpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhTaW5nbGUsIFt7XG4gICAgICAgIGtleTogJ3NsaWRlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzbGlkZXIoKSB7XG4gICAgICAgICAgICAkKFwiI3NsaWRlci1zaW5nbGVcIikucmVzcG9uc2l2ZVNsaWRlcyh7XG4gICAgICAgICAgICAgICAgbWFudWFsQ29udHJvbHM6ICcjc2xpZGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXG4gICAgICAgICAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBiZWZvcmU6IGZ1bmN0aW9uIGJlZm9yZShpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWV0aXRsZSA9ICQoXCIuc2xpZGVyLWNvbnRlbnQgaDJcIikuZXEoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBUd2VlbkxpdGUuZnJvbVRvKHRoaXMuaG9tZXRpdGxlLCAxLCB7IG9wYWNpdHk6IDAsIHk6IC00MCB9LCB7IG9wYWNpdHk6IDEsIHk6IDAgfSwgMC40KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYW5pbWF0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFuaW1hdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuaG9tZWFyZWEgPSBuZXcgVGltZWxpbmVNYXgoKTtcbiAgICAgICAgICAgIHRoaXMucHJvamVjdGFyZWEgPSBuZXcgVGltZWxpbmVNYXgoKTtcbiAgICAgICAgICAgIHRoaXMuc2tpbGxhcmVhID0gbmV3IFRpbWVsaW5lTWF4KCk7XG5cbiAgICAgICAgICAgIHRoaXMuaG9tZXRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob21lLWNvbnRlbnQgaDJcIik7XG4gICAgICAgICAgICB0aGlzLnByb2plY3RpdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ncmlkLWl0ZW1cIik7XG4gICAgICAgICAgICB0aGlzLnNraWxsaXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2tpbGwtaXRlbVwiKTtcblxuICAgICAgICAgICAgdGhpcy5ob21lYXJlYS5mcm9tVG8odGhpcy5ob21ldGl0bGUsIDEsIHsgb3BhY2l0eTogMCwgeTogLTQwIH0sIHsgb3BhY2l0eTogMSwgeTogMCB9LCAwLjQpO1xuICAgICAgICAgICAgdGhpcy5wcm9qZWN0YXJlYS5zdGFnZ2VyRnJvbVRvKHRoaXMucHJvamVjdGl0ZW0sIDAuMiwgeyBzY2FsZTogMCwgeTogMjAgfSwgeyBzY2FsZTogMSwgeTogMCB9LCAwLjIpO1xuICAgICAgICAgICAgdGhpcy5za2lsbGFyZWEuc3RhZ2dlckZyb21Ubyh0aGlzLnNraWxsaXRlbSwgMC4yLCB7IG9wYWNpdHk6IDAsIHg6IC0yMCB9LCB7IG9wYWNpdHk6IDEsIHg6IDAgfSwgMC4yKTtcblxuICAgICAgICAgICAgdmFyIG1haW4gPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoeyB0cmlnZ2VyRWxlbWVudDogJyNob21lJywgcmV2ZXJzZTogZmFsc2UgfSkuc2V0VHdlZW4odGhpcy5ob21lYXJlYSkuYWRkVG8odGhpcy5jb250cm9sbGVyKTtcblxuICAgICAgICAgICAgdmFyIHByb2plY3QgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoeyB0cmlnZ2VyRWxlbWVudDogJyNwcm9qZWN0cycsIHJldmVyc2U6IGZhbHNlIH0pLnNldFR3ZWVuKHRoaXMucHJvamVjdGFyZWEpLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XG5cbiAgICAgICAgICAgIHZhciBza2lsbCA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7IHRyaWdnZXJFbGVtZW50OiAnI3Byb2plY3RzJywgcmV2ZXJzZTogZmFsc2UgfSkuc2V0VHdlZW4odGhpcy5za2lsbGFyZWEpLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2luZ2xlO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTaW5nbGU7XG5cbn0se31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBGb290ZXIgPSBmdW5jdGlvbiBGb290ZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvb3Rlcik7XG5cbiAgICBjb25zb2xlLmxvZygnRm9vdGVyJyk7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBGb290ZXI7XG5cbn0se31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGVhZGVyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVhZGVyKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnSGVhZGVyJyk7XG4gICAgICAgIHRoaXMubWVudXJlc2l6ZSgpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5tZW51cmVzaXplLmJpbmQodGhpcykpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5hY3RpdmVPblNjcm9sbC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5hbmNob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtID4gYScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYW5jaG9yLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFuY2hvcltpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYW5jaG9ySnVtcC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhIZWFkZXIsIFt7XG4gICAgICAgIGtleTogJ21lbnVyZXNpemUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWVudXJlc2l6ZSgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IDEwMDtcbiAgICAgICAgICAgIHRoaXMubmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hc3RoZWFkJyk7XG4gICAgICAgICAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ID4gc3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hdi5jbGFzc0xpc3QuYWRkKCdzbWFsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA8PSBzdGFydCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2LmNsYXNzTGlzdC5yZW1vdmUoJ3NtYWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FuY2hvckp1bXAnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYW5jaG9ySnVtcChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAkKGV2ZW50LnRhcmdldC5oYXNoKS5vZmZzZXQoKS50b3AgLSA0NCB9LCA1MDApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhY3RpdmVPblNjcm9sbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhY3RpdmVPblNjcm9sbCgpIHtcbiAgICAgICAgICAgIHZhciBwb3MgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IHNlY3Rpb25zW2ldLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICB2YXIgc2VjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VjdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWN0cG9zID0gJChzZWN0KS5wb3NpdGlvbigpLnRvcCAtIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlY3Rwb3MgPD0gcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbmF2YmFyIHVsIGxpLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNuYXZiYXIgdWwgbGkuJyArIGlkICsgJycpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBIZWFkZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEhlYWRlcjtcblxufSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdFx0dmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgRGV2aWNlSW5mbyA9IGZ1bmN0aW9uICgpIHtcblx0XHRmdW5jdGlvbiBEZXZpY2VJbmZvKCkge1xuXHRcdFx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGV2aWNlSW5mbyk7XG5cdFx0fVxuXG5cdFx0X2NyZWF0ZUNsYXNzKERldmljZUluZm8sIG51bGwsIFt7XG5cdFx0XHRcdGtleTogXCJjaGVja1wiLFxuXHRcdFx0XHR2YWx1ZTogZnVuY3Rpb24gY2hlY2soKSB7XG5cblx0XHRcdFx0XHRcdC8vRkZcblx0XHRcdFx0XHRcdERldmljZUluZm8uaXNGaXJlZm94ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJmaXJlZm94XCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzQ2hyb21lID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJjaHJvbWVcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcblx0XHRcdFx0XHRcdERldmljZUluZm8uaXNTYWZhcmkgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImNocm9tZVwiKSA8PSAtMSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInNhZmFyaVwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc0FuZHJvaWQgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImFuZHJvaWRcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcblx0XHRcdFx0XHRcdERldmljZUluZm8uaXNJT1MgPSAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtO1xuXG5cdFx0XHRcdFx0XHQvL0lFXG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzSUUgPSBEZXZpY2VJbmZvLmdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uKCkgIT0gLTE7XG5cblx0XHRcdFx0XHRcdC8vIElTIFRPVUNIXG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiVG91Y2hFdmVudFwiKTtcblx0XHRcdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzVG91Y2ggPSB0cnVlO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdFx0XHRcdERldmljZUluZm8uaXNUb3VjaCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0fSwge1xuXHRcdFx0XHRrZXk6IFwiZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb25cIixcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uKCkge1xuXG5cdFx0XHRcdFx0XHR2YXIgcnYgPSAtMTtcblx0XHRcdFx0XHRcdHZhciByZSA9IG51bGw7XG5cdFx0XHRcdFx0XHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXG5cdFx0XHRcdFx0XHRpZiAobmF2aWdhdG9yLmFwcE5hbWUgPT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpIHtcblxuXHRcdFx0XHRcdFx0XHRcdHJlID0gbmV3IFJlZ0V4cChcIk1TSUUgKFswLTldezEsfVtcXC4wLTldezAsfSlcIik7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAocmUuZXhlYyh1YSkgIT09IG51bGwpIHJ2ID0gcGFyc2VGbG9hdChSZWdFeHAuJDEpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChuYXZpZ2F0b3IuYXBwTmFtZSA9PSAnTmV0c2NhcGUnKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRyZSA9IG5ldyBSZWdFeHAoXCJUcmlkZW50Ly4qcnY6KFswLTldezEsfVtcXC4wLTldezAsfSlcIik7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAocmUuZXhlYyh1YSkgIT09IG51bGwpIHJ2ID0gcGFyc2VGbG9hdChSZWdFeHAuJDEpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRyZXR1cm4gcnY7XG5cdFx0XHRcdH1cblx0XHR9XSk7XG5cblx0XHRyZXR1cm4gRGV2aWNlSW5mbztcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRGV2aWNlSW5mbztcblxufSx7fV19LHt9LFsyXSlcblxuIiwiY2xhc3MgSG9tZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdIb21lJyk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFNjcm9sbE1hZ2ljLkNvbnRyb2xsZXIoKTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc2xpZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2xpZGVyKCl7XHJcbiAgICBcdCQoXCIjc2xpZGVyLWhvbWVcIikucmVzcG9uc2l2ZVNsaWRlcyh7XHJcbiAgICAgICAgICAgIG1hbnVhbENvbnRyb2xzOiAnI3NsaWRlci1wYWdpbmF0aW9uJyxcclxuICAgICAgICAgICAgdGltZW91dDogNjAwMCxcclxuICAgICAgICAgICAgYXV0bzogdHJ1ZSxcclxuICAgICAgICAgICAgYmVmb3JlOiBmdW5jdGlvbihpbmRleCl7XHJcbiAgICBcdFx0XHR0aGlzLmhvbWV0aXRsZSA9ICQoXCIuaG9tZS1jb250ZW50IGgyXCIpLmVxKGluZGV4KTtcclxuICAgICAgICAgICAgICBcdFR3ZWVuTGl0ZS5mcm9tVG8odGhpcy5ob21ldGl0bGUsIDEsIHsgb3BhY2l0eTogMCwgeTotNDAgfSwgeyBvcGFjaXR5OiAxLCB5OjAgfSwgMC40KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFuaW1hdGlvbigpe1xyXG4gICAgICAgIHRoaXMuaG9tZWFyZWEgICAgXHQ9IG5ldyBUaW1lbGluZU1heCgpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGFyZWEgICAgPSBuZXcgVGltZWxpbmVNYXgoKTtcclxuICAgICAgICB0aGlzLnNraWxsYXJlYSAgICBcdD0gbmV3IFRpbWVsaW5lTWF4KCk7XHJcblxyXG4gICAgICAgIHRoaXMuaG9tZXRpdGxlIFx0XHQ9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZS1jb250ZW50IGgyXCIpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGl0ZW0gXHQ9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ3JpZC1pdGVtXCIpO1xyXG4gICAgICAgIHRoaXMuc2tpbGxpdGVtIFx0XHQ9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2tpbGwtaXRlbVwiKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmhvbWVhcmVhLmZyb21Ubyh0aGlzLmhvbWV0aXRsZSwgMSwgeyBvcGFjaXR5OiAwLCB5Oi00MCB9LCB7IG9wYWNpdHk6IDEsIHk6MCB9LCAwLjQpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGFyZWEuc3RhZ2dlckZyb21Ubyh0aGlzLnByb2plY3RpdGVtLCAwLjIsIHsgc2NhbGU6IDAsIHk6MjB9LCB7IHNjYWxlOiAxLCB5OjAgfSwgMC4yKTtcclxuICAgICAgICB0aGlzLnNraWxsYXJlYS5zdGFnZ2VyRnJvbVRvKHRoaXMuc2tpbGxpdGVtLCAwLjIsIHsgb3BhY2l0eTogMCwgeDotMjB9LCB7IG9wYWNpdHk6IDEsIHg6MCB9LCAwLjIpO1xyXG4gICAgICAgXHJcbiAgICAgICAgbGV0IG1haW4gPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe3RyaWdnZXJFbGVtZW50OiAnI2hvbWUnLCByZXZlcnNlOiBmYWxzZSx9KVxyXG4gICAgICAgIC5zZXRUd2Vlbih0aGlzLmhvbWVhcmVhKVxyXG4gICAgICAgIC5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICBsZXQgcHJvamVjdCA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7dHJpZ2dlckVsZW1lbnQ6ICcjcHJvamVjdHMnLCByZXZlcnNlOiBmYWxzZSx9KVxyXG4gICAgICAgIC5zZXRUd2Vlbih0aGlzLnByb2plY3RhcmVhKVxyXG4gICAgICAgIC5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICBsZXQgc2tpbGwgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe3RyaWdnZXJFbGVtZW50OiAnI3Byb2plY3RzJywgcmV2ZXJzZTogZmFsc2UsfSlcclxuICAgICAgICAuc2V0VHdlZW4odGhpcy5za2lsbGFyZWEpXHJcbiAgICAgICAgLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSG9tZTsiLCJpbXBvcnQgRGV2aWNlSW5mbyBmcm9tICcuLi90b29scy9EZXZpY2VJbmZvJztcbmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vcGFydGlhbHMvSGVhZGVyJztcbmltcG9ydCBGb290ZXIgZnJvbSAnLi4vcGFydGlhbHMvRm9vdGVyJztcblxuaW1wb3J0IEhvbWUgZnJvbSAnLi9Ib21lJztcbmltcG9ydCBTaW5nbGUgZnJvbSAnLi9TaW5nbGUnO1xuXG5jbGFzcyBNYWluIHtcblxuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2luaXQnKTtcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xuICAgIH1cblxuICAgIHJlYWR5KCkge1xuICAgIFx0RGV2aWNlSW5mby5jaGVjaygpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzVG91Y2gpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcInRvdWNoXCIpO1xuICAgIFx0aWYoRGV2aWNlSW5mby5pc0lFKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJpZVwiKTtcbiAgICBcdGlmKERldmljZUluZm8uaXNBbmRyb2lkKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJhbmRyb2lkXCIpO1xuICAgIFx0aWYoRGV2aWNlSW5mby5pc0lPUykgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaW9zXCIpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzRmlyZWZveCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiZmlyZWZveFwiKTtcbiAgICAgICAgaWYoRGV2aWNlSW5mby5pc1NhZmFyaSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwic2FmYXJpXCIpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzQ2hyb21lKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJjaHJvbWVcIik7XG4gICAgICAgIC8vIGxldCBwcmVsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlbG9hZGVyJyk7XG4gICAgICAgIC8vIFR3ZWVuTGl0ZS50byhwcmVsb2FkZXIsIDAuNSx7Y3NzOnthdXRvQWxwaGE6MH0sZGVsYXk6MC40fSk7XG4gICAgICAgIC8vIFR3ZWVuTGl0ZS5zZXQocHJlbG9hZGVyLHtjc3M6e2Rpc3BsYXk6XCJibG9ja1wifSxkZWxheTowLjh9KTtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBuZXcgSGVhZGVyKCk7XG4gICAgICAgIHRoaXMuZm9vdGVyID0gbmV3IEZvb3RlcigpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoKCQoJ2JvZHkgc2VjdGlvbicpLmF0dHIoXCJkYXRhLXRlbXBsYXRlXCIpKXtcbiAgICAgICAgICAgIGNhc2UgXCJob21lXCI6IHRoaXMucGFnZSA9IG5ldyBIb21lKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzaW5nbGVcIjogdGhpcy5wYWdlID0gbmV3IFNpbmdsZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuXG5uZXcgTWFpbigpOyIsImNsYXNzIFNpbmdsZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTaW5nbGUnKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcigpO1xyXG4gICAgICAgIC8vIHRoaXMuYW5pbWF0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBzbGlkZXIoKXtcclxuICAgIFx0JChcIiNzbGlkZXItc2luZ2xlXCIpLnJlc3BvbnNpdmVTbGlkZXMoe1xyXG4gICAgICAgICAgICBtYW51YWxDb250cm9sczogJyNzbGlkZXItcGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IDYwMDAsXHJcbiAgICAgICAgICAgIGF1dG86IHRydWUsXHJcbiAgICAgICAgICAgIGJlZm9yZTogZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgXHRcdFx0dGhpcy5ob21ldGl0bGUgPSAkKFwiLnNsaWRlci1jb250ZW50IGgyXCIpLmVxKGluZGV4KTtcclxuICAgICAgICAgICAgICBcdFR3ZWVuTGl0ZS5mcm9tVG8odGhpcy5ob21ldGl0bGUsIDEsIHsgb3BhY2l0eTogMCwgeTotNDAgfSwgeyBvcGFjaXR5OiAxLCB5OjAgfSwgMC40KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFuaW1hdGlvbigpe1xyXG4gICAgICAgIHRoaXMuaG9tZWFyZWEgICAgXHQ9IG5ldyBUaW1lbGluZU1heCgpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGFyZWEgICAgPSBuZXcgVGltZWxpbmVNYXgoKTtcclxuICAgICAgICB0aGlzLnNraWxsYXJlYSAgICBcdD0gbmV3IFRpbWVsaW5lTWF4KCk7XHJcblxyXG4gICAgICAgIHRoaXMuaG9tZXRpdGxlIFx0XHQ9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZS1jb250ZW50IGgyXCIpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGl0ZW0gXHQ9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ3JpZC1pdGVtXCIpO1xyXG4gICAgICAgIHRoaXMuc2tpbGxpdGVtIFx0XHQ9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2tpbGwtaXRlbVwiKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmhvbWVhcmVhLmZyb21Ubyh0aGlzLmhvbWV0aXRsZSwgMSwgeyBvcGFjaXR5OiAwLCB5Oi00MCB9LCB7IG9wYWNpdHk6IDEsIHk6MCB9LCAwLjQpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGFyZWEuc3RhZ2dlckZyb21Ubyh0aGlzLnByb2plY3RpdGVtLCAwLjIsIHsgc2NhbGU6IDAsIHk6MjB9LCB7IHNjYWxlOiAxLCB5OjAgfSwgMC4yKTtcclxuICAgICAgICB0aGlzLnNraWxsYXJlYS5zdGFnZ2VyRnJvbVRvKHRoaXMuc2tpbGxpdGVtLCAwLjIsIHsgb3BhY2l0eTogMCwgeDotMjB9LCB7IG9wYWNpdHk6IDEsIHg6MCB9LCAwLjIpO1xyXG4gICAgICAgXHJcbiAgICAgICAgbGV0IG1haW4gPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe3RyaWdnZXJFbGVtZW50OiAnI2hvbWUnLCByZXZlcnNlOiBmYWxzZSx9KVxyXG4gICAgICAgIC5zZXRUd2Vlbih0aGlzLmhvbWVhcmVhKVxyXG4gICAgICAgIC5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICBsZXQgcHJvamVjdCA9IG5ldyBTY3JvbGxNYWdpYy5TY2VuZSh7dHJpZ2dlckVsZW1lbnQ6ICcjcHJvamVjdHMnLCByZXZlcnNlOiBmYWxzZSx9KVxyXG4gICAgICAgIC5zZXRUd2Vlbih0aGlzLnByb2plY3RhcmVhKVxyXG4gICAgICAgIC5hZGRUbyh0aGlzLmNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICBsZXQgc2tpbGwgPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoe3RyaWdnZXJFbGVtZW50OiAnI3Byb2plY3RzJywgcmV2ZXJzZTogZmFsc2UsfSlcclxuICAgICAgICAuc2V0VHdlZW4odGhpcy5za2lsbGFyZWEpXHJcbiAgICAgICAgLmFkZFRvKHRoaXMuY29udHJvbGxlcik7XHJcbiAgICB9XHJcblxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2luZ2xlOyIsImNsYXNzIEZvb3RlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdGb290ZXInKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvb3RlcjsiLCJjbGFzcyBIZWFkZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnSGVhZGVyJyk7XHJcbiAgICAgICAgdGhpcy5tZW51cmVzaXplKCk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMubWVudXJlc2l6ZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5hY3RpdmVPblNjcm9sbC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmFuY2hvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0gPiBhJyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFuY2hvci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIFx0dGhpcy5hbmNob3JbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmFuY2hvckp1bXAuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtZW51cmVzaXplKCl7XHJcbiAgICAgICAgY29uc3Qgc3RhcnQgPSAxMDA7XHJcbiAgICAgICAgdGhpcy5uYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFzdGhlYWQnKTtcclxuICAgICAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ID4gc3RhcnQpeyBcclxuICAgICAgICAgICAgdGhpcy5uYXYuY2xhc3NMaXN0LmFkZCgnc21hbGwnKTsgXHJcbiAgICAgICAgfSBcclxuICAgICAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0IDw9IHN0YXJ0KXtcclxuICAgICAgICAgICAgdGhpcy5uYXYuY2xhc3NMaXN0LnJlbW92ZSgnc21hbGwnKTsgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFuY2hvckp1bXAoZXZlbnQpe1xyXG4gICAgXHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogJChldmVudC50YXJnZXQuaGFzaCkub2Zmc2V0KCkudG9wIC0gNDR9LCA1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdGl2ZU9uU2Nyb2xsKCl7XHJcbiAgICAgICAgbGV0IHBvcyA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuICAgICAgICBsZXQgc2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGlkID0gc2VjdGlvbnNbaV0uZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgICAgICBsZXQgc2VjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICAgICAgaWYgKHNlY3QgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlY3Rwb3MgPSAkKHNlY3QpLnBvc2l0aW9uKCkudG9wIC0gMTAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlY3Rwb3MgPD0gcG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhciB1bCBsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhciB1bCBsaS4nK2lkKycnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIZWFkZXI7IiwiY2xhc3MgRGV2aWNlSW5mbyB7XHJcblxyXG5cdHN0YXRpYyBjaGVjaygpIHtcclxuXHJcblx0XHQvL0ZGXHJcblx0XHREZXZpY2VJbmZvLmlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0RGV2aWNlSW5mby5pc0Nocm9tZSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY2hyb21lXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XHJcblx0XHREZXZpY2VJbmZvLmlzU2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJjaHJvbWVcIikgPD0gLTEgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJzYWZhcmlcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcclxuXHRcdERldmljZUluZm8uaXNBbmRyb2lkID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJhbmRyb2lkXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XHJcblx0XHREZXZpY2VJbmZvLmlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbTtcclxuXHJcblx0XHQvL0lFXHJcblx0XHREZXZpY2VJbmZvLmlzSUUgPSBEZXZpY2VJbmZvLmdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uKCkgIT0gLTE7XHJcblxyXG5cdFx0Ly8gSVMgVE9VQ0hcclxuXHRcdHRyeSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiVG91Y2hFdmVudFwiKTtcclxuICAgICAgICAgICAgRGV2aWNlSW5mby5pc1RvdWNoID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBEZXZpY2VJbmZvLmlzVG91Y2ggPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uICgpIHtcclxuXHJcbiAgICAgIFx0bGV0IHJ2ID0gLTE7XHJcbiAgICAgIFx0bGV0IHJlID0gbnVsbDtcclxuICAgICAgICBjb25zdCB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XHJcblxyXG5cdFx0aWYgKG5hdmlnYXRvci5hcHBOYW1lID09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKVxyXG5cdFx0e1xyXG5cclxuXHRcdFx0cmUgID0gbmV3IFJlZ0V4cChcIk1TSUUgKFswLTldezEsfVtcXC4wLTldezAsfSlcIik7XHJcblxyXG5cdFx0XHRpZiAocmUuZXhlYyh1YSkgIT09IG51bGwpIHJ2ID0gcGFyc2VGbG9hdCggUmVnRXhwLiQxICk7XHJcblxyXG5cdFx0fSBlbHNlIGlmIChuYXZpZ2F0b3IuYXBwTmFtZSA9PSAnTmV0c2NhcGUnKSB7XHJcblxyXG5cdFx0XHRyZSAgPSBuZXcgUmVnRXhwKFwiVHJpZGVudC8uKnJ2OihbMC05XXsxLH1bXFwuMC05XXswLH0pXCIpO1xyXG5cclxuXHRcdFx0aWYgKHJlLmV4ZWModWEpICE9PSBudWxsKSBydiA9IHBhcnNlRmxvYXQoIFJlZ0V4cC4kMSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBydjtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERldmljZUluZm87Il19
