!function e(t,n,o){function r(i,s){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return r(n?n:e)},c,c.exports,e,t,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(){o(this,e),console.log("Home"),this.controller=new ScrollMagic.Controller,this.animation(),this.slider()}return r(e,[{key:"slider",value:function(){$("#slider-home").responsiveSlides({manualControls:"#slider-pagination",timeout:4e3,auto:!0,before:function(e){}})}},{key:"animation",value:function(){this.homearea=new TimelineMax,this.hometitle=document.querySelector(".home-content h2"),this.homearea.fromTo(this.hometitle,.8,{opacity:0,y:-40},{opacity:1,y:0},.4);new ScrollMagic.Scene({triggerElement:"#home",reverse:!1}).setTween(this.homearea).addTo(this.controller)}}]),e}();n["default"]=a},{}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../tools/DeviceInfo"),s=o(i),u=e("../partials/Header"),l=o(u),c=e("../partials/Footer"),f=o(c),d=e("./Home"),h=o(d),v=function(){function e(){r(this,e),console.log("init"),this.ready()}return a(e,[{key:"ready",value:function(){switch(s["default"].check(),s["default"].isTouch&&document.body.classList.add("touch"),s["default"].isIE&&document.body.classList.add("ie"),s["default"].isAndroid&&document.body.classList.add("android"),s["default"].isIOS&&document.body.classList.add("ios"),s["default"].isFirefox&&document.body.classList.add("firefox"),s["default"].isSafari&&document.body.classList.add("safari"),s["default"].isChrome&&document.body.classList.add("chrome"),this.header=new l["default"],this.footer=new f["default"],$("body section").attr("data-template")){case"home":this.page=new h["default"]}}}]),e}();new v},{"../partials/Footer":3,"../partials/Header":4,"../tools/DeviceInfo":5,"./Home":1}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function a(){o(this,a),console.log("Footer")};n["default"]=r},{}],4:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(){o(this,e),console.log("Header"),this.menuresize(),window.addEventListener("scroll",this.menuresize.bind(this)),window.addEventListener("scroll",this.activeOnScroll.bind(this)),this.anchor=document.querySelectorAll(".menu-item > a");for(var t=0;t<this.anchor.length;t++)this.anchor[t].addEventListener("click",this.anchorJump.bind(this))}return r(e,[{key:"menuresize",value:function(){var e=100;this.nav=document.getElementById("masthead"),window.pageYOffset>e&&this.nav.classList.add("small"),window.pageYOffset<=e&&this.nav.classList.remove("small")}},{key:"anchorJump",value:function(e){e.preventDefault(),$("html, body").animate({scrollTop:$(e.target.hash).offset().top},500)}},{key:"activeOnScroll",value:function(){for(var e=window.pageYOffset,t=document.querySelectorAll(".section"),n=0;n<t.length;n++){var o=t[n].getAttribute("id"),r=document.getElementById(o);if(null!=r){var a=$(r).position().top-168;e>=a&&($("#navbar ul li.active").removeClass("active"),$("#navbar ul li."+o).addClass("active"))}}}}]),e}();n["default"]=a},{}],5:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(){function e(){o(this,e)}return r(e,null,[{key:"check",value:function(){e.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,e.isChrome=navigator.userAgent.toLowerCase().indexOf("chrome")>-1,e.isSafari=navigator.userAgent.toLowerCase().indexOf("chrome")<=-1&&navigator.userAgent.toLowerCase().indexOf("safari")>-1,e.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")>-1,e.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e.isIE=-1!=e.getInternetExplorerVersion();try{document.createEvent("TouchEvent"),e.isTouch=!0}catch(t){e.isTouch=!1}}},{key:"getInternetExplorerVersion",value:function(){var e=-1,t=null,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&(e=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&(e=parseFloat(RegExp.$1))),e}}]),e}();n["default"]=a},{}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC5qcyIsInNyYy9qcy9jdXN0b20vSG9tZS5qcyIsInNyYy9qcy9jdXN0b20vTWFpbi5qcyIsInNyYy9qcy9wYXJ0aWFscy9Gb290ZXIuanMiLCJzcmMvanMvcGFydGlhbHMvSGVhZGVyLmpzIiwic3JjL2pzL3Rvb2xzL0RldmljZUluZm8uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsImYiLCJFcnJvciIsImNvZGUiLCJsIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiSG9tZSIsInRoaXMiLCJjb25zb2xlIiwibG9nIiwiY29udHJvbGxlciIsIlNjcm9sbE1hZ2ljIiwiQ29udHJvbGxlciIsImFuaW1hdGlvbiIsInNsaWRlciIsIiQiLCJyZXNwb25zaXZlU2xpZGVzIiwibWFudWFsQ29udHJvbHMiLCJ0aW1lb3V0IiwiYXV0byIsImJlZm9yZSIsImluZGV4IiwiaG9tZWFyZWEiLCJUaW1lbGluZU1heCIsImhvbWV0aXRsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZyb21UbyIsIm9wYWNpdHkiLCJ5IiwiU2NlbmUiLCJ0cmlnZ2VyRWxlbWVudCIsInJldmVyc2UiLCJzZXRUd2VlbiIsImFkZFRvIiwiMiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9EZXZpY2VJbmZvIiwiX0RldmljZUluZm8yIiwiX0hlYWRlciIsIl9IZWFkZXIyIiwiX0Zvb3RlciIsIl9Gb290ZXIyIiwiX0hvbWUiLCJfSG9tZTIiLCJNYWluIiwicmVhZHkiLCJjaGVjayIsImlzVG91Y2giLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNJRSIsImlzQW5kcm9pZCIsImlzSU9TIiwiaXNGaXJlZm94IiwiaXNTYWZhcmkiLCJpc0Nocm9tZSIsImhlYWRlciIsImZvb3RlciIsImF0dHIiLCJwYWdlIiwiLi4vcGFydGlhbHMvRm9vdGVyIiwiLi4vcGFydGlhbHMvSGVhZGVyIiwiLi4vdG9vbHMvRGV2aWNlSW5mbyIsIi4vSG9tZSIsIjMiLCJGb290ZXIiLCI0IiwiSGVhZGVyIiwibWVudXJlc2l6ZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJiaW5kIiwiYWN0aXZlT25TY3JvbGwiLCJhbmNob3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYW5jaG9ySnVtcCIsInN0YXJ0IiwibmF2IiwiZ2V0RWxlbWVudEJ5SWQiLCJwYWdlWU9mZnNldCIsInJlbW92ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiaGFzaCIsIm9mZnNldCIsInRvcCIsInBvcyIsInNlY3Rpb25zIiwiaWQiLCJnZXRBdHRyaWJ1dGUiLCJzZWN0Iiwic2VjdHBvcyIsInBvc2l0aW9uIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIjUiLCJEZXZpY2VJbmZvIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwidGVzdCIsIk1TU3RyZWFtIiwiZ2V0SW50ZXJuZXRFeHBsb3JlclZlcnNpb24iLCJjcmVhdGVFdmVudCIsInJ2IiwicmUiLCJ1YSIsImFwcE5hbWUiLCJSZWdFeHAiLCJleGVjIiwicGFyc2VGbG9hdCIsIiQxIl0sIm1hcHBp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QWNDLFFBQVEsV0FBYSxHQUM5RUosRUFBVzlDLE1BQVEsbUJBQW1CbUQsS0FBS0osVUFBVUMsYUFBZS9CLE9BQU9tQyxTQUczRU4sRUFBV2hELEtBQWtELElBQTNDZ0QsRUFBV08sNEJBRzdCLEtBQ1VyRixTQUFTc0YsWUFBWSxjQUNyQlIsRUFBV3BELFNBQVUsRUFFdkIsTUFBT25GLEdBQ0x1SSxFQUFXcEQsU0FBVSxNTHNON0JqRCxJQUFLLDZCQUNMVCxNQUFPLFdLaE5KLEdBQUl1SCxHQUFLLEdBQ0xDLEVBQUssS0FDRkMsRUFBS1YsVUFBVUMsU0FnQjNCLE9BZHlCLCtCQUFyQkQsVUFBVVcsU0FHYkYsRUFBTSxHQUFJRyxRQUFPLDhCQUVHLE9BQWhCSCxFQUFHSSxLQUFLSCxLQUFjRixFQUFLTSxXQUFZRixPQUFPRyxNQUVuQixZQUFyQmYsVUFBVVcsVUFFcEJGLEVBQU0sR0FBSUcsUUFBTyxzQ0FFRyxPQUFoQkgsRUFBR0ksS0FBS0gsS0FBY0YsRUFBS00sV0FBWUYsT0FBT0csTUFHNUNQLE1Mb05BVCxJQUdUekgsR0FBQUEsV0tsTmV5SCxZTG9OSiIsImZpbGUiOiJidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBIb21lID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEhvbWUoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIb21lKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZScpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU2Nyb2xsTWFnaWMuQ29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbigpO1xuICAgICAgICB0aGlzLnNsaWRlcigpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhIb21lLCBbe1xuICAgICAgICBrZXk6ICdzbGlkZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2xpZGVyKCkge1xuICAgICAgICAgICAgJChcIiNzbGlkZXItaG9tZVwiKS5yZXNwb25zaXZlU2xpZGVzKHtcbiAgICAgICAgICAgICAgICBtYW51YWxDb250cm9sczogJyNzbGlkZXItcGFnaW5hdGlvbicsXG4gICAgICAgICAgICAgICAgdGltZW91dDogNDAwMCxcbiAgICAgICAgICAgICAgICBhdXRvOiB0cnVlLFxuICAgICAgICAgICAgICAgIGJlZm9yZTogZnVuY3Rpb24gYmVmb3JlKGluZGV4KSB7fVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FuaW1hdGlvbicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmltYXRpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmhvbWVhcmVhID0gbmV3IFRpbWVsaW5lTWF4KCk7XG4gICAgICAgICAgICB0aGlzLmhvbWV0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZS1jb250ZW50IGgyXCIpO1xuXG4gICAgICAgICAgICB0aGlzLmhvbWVhcmVhLmZyb21Ubyh0aGlzLmhvbWV0aXRsZSwgMC44LCB7IG9wYWNpdHk6IDAsIHk6IC00MCB9LCB7IG9wYWNpdHk6IDEsIHk6IDAgfSwgMC40KTtcblxuICAgICAgICAgICAgdmFyIG1haW4gPSBuZXcgU2Nyb2xsTWFnaWMuU2NlbmUoeyB0cmlnZ2VyRWxlbWVudDogJyNob21lJywgcmV2ZXJzZTogZmFsc2UgfSkuc2V0VHdlZW4odGhpcy5ob21lYXJlYSkuYWRkVG8odGhpcy5jb250cm9sbGVyKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBIb21lO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBIb21lO1xuXG59LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbid1c2Ugc3RyaWN0JztcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9EZXZpY2VJbmZvID0gcmVxdWlyZSgnLi4vdG9vbHMvRGV2aWNlSW5mbycpO1xuXG52YXIgX0RldmljZUluZm8yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGV2aWNlSW5mbyk7XG5cbnZhciBfSGVhZGVyID0gcmVxdWlyZSgnLi4vcGFydGlhbHMvSGVhZGVyJyk7XG5cbnZhciBfSGVhZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0hlYWRlcik7XG5cbnZhciBfRm9vdGVyID0gcmVxdWlyZSgnLi4vcGFydGlhbHMvRm9vdGVyJyk7XG5cbnZhciBfRm9vdGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Zvb3Rlcik7XG5cbnZhciBfSG9tZSA9IHJlcXVpcmUoJy4vSG9tZScpO1xuXG52YXIgX0hvbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSG9tZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBNYWluID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1haW4oKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNYWluKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnaW5pdCcpO1xuICAgICAgICB0aGlzLnJlYWR5KCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKE1haW4sIFt7XG4gICAgICAgIGtleTogJ3JlYWR5JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWR5KCkge1xuICAgICAgICAgICAgX0RldmljZUluZm8yLmRlZmF1bHQuY2hlY2soKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc1RvdWNoKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJ0b3VjaFwiKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc0lFKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJpZVwiKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc0FuZHJvaWQpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImFuZHJvaWRcIik7XG4gICAgICAgICAgICBpZiAoX0RldmljZUluZm8yLmRlZmF1bHQuaXNJT1MpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImlvc1wiKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc0ZpcmVmb3gpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcImZpcmVmb3hcIik7XG4gICAgICAgICAgICBpZiAoX0RldmljZUluZm8yLmRlZmF1bHQuaXNTYWZhcmkpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcInNhZmFyaVwiKTtcbiAgICAgICAgICAgIGlmIChfRGV2aWNlSW5mbzIuZGVmYXVsdC5pc0Nocm9tZSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiY2hyb21lXCIpO1xuICAgICAgICAgICAgLy8gbGV0IHByZWxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVsb2FkZXInKTtcbiAgICAgICAgICAgIC8vIFR3ZWVuTGl0ZS50byhwcmVsb2FkZXIsIDAuNSx7Y3NzOnthdXRvQWxwaGE6MH0sZGVsYXk6MC40fSk7XG4gICAgICAgICAgICAvLyBUd2VlbkxpdGUuc2V0KHByZWxvYWRlcix7Y3NzOntkaXNwbGF5OlwiYmxvY2tcIn0sZGVsYXk6MC44fSk7XG4gICAgICAgICAgICB0aGlzLmhlYWRlciA9IG5ldyBfSGVhZGVyMi5kZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmZvb3RlciA9IG5ldyBfRm9vdGVyMi5kZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoJCgnYm9keSBzZWN0aW9uJykuYXR0cihcImRhdGEtdGVtcGxhdGVcIikpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiaG9tZVwiOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2UgPSBuZXcgX0hvbWUyLmRlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTWFpbjtcbn0oKTtcblxubmV3IE1haW4oKTtcblxufSx7XCIuLi9wYXJ0aWFscy9Gb290ZXJcIjozLFwiLi4vcGFydGlhbHMvSGVhZGVyXCI6NCxcIi4uL3Rvb2xzL0RldmljZUluZm9cIjo1LFwiLi9Ib21lXCI6MX1dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBGb290ZXIgPSBmdW5jdGlvbiBGb290ZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvb3Rlcik7XG5cbiAgICBjb25zb2xlLmxvZygnRm9vdGVyJyk7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBGb290ZXI7XG5cbn0se31dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGVhZGVyKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVhZGVyKTtcblxuICAgICAgICBjb25zb2xlLmxvZygnSGVhZGVyJyk7XG4gICAgICAgIHRoaXMubWVudXJlc2l6ZSgpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5tZW51cmVzaXplLmJpbmQodGhpcykpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5hY3RpdmVPblNjcm9sbC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5hbmNob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtID4gYScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYW5jaG9yLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFuY2hvcltpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYW5jaG9ySnVtcC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhIZWFkZXIsIFt7XG4gICAgICAgIGtleTogJ21lbnVyZXNpemUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWVudXJlc2l6ZSgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IDEwMDtcbiAgICAgICAgICAgIHRoaXMubmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hc3RoZWFkJyk7XG4gICAgICAgICAgICBpZiAod2luZG93LnBhZ2VZT2Zmc2V0ID4gc3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hdi5jbGFzc0xpc3QuYWRkKCdzbWFsbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCA8PSBzdGFydCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2LmNsYXNzTGlzdC5yZW1vdmUoJ3NtYWxsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2FuY2hvckp1bXAnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYW5jaG9ySnVtcChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAkKGV2ZW50LnRhcmdldC5oYXNoKS5vZmZzZXQoKS50b3AgfSwgNTAwKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnYWN0aXZlT25TY3JvbGwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWN0aXZlT25TY3JvbGwoKSB7XG4gICAgICAgICAgICB2YXIgcG9zID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24nKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBzZWN0aW9uc1tpXS5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHNlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VjdHBvcyA9ICQoc2VjdCkucG9zaXRpb24oKS50b3AgLSAxNjg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWN0cG9zIDw9IHBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhciB1bCBsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbmF2YmFyIHVsIGxpLicgKyBpZCArICcnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gSGVhZGVyO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBIZWFkZXI7XG5cbn0se31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHRcdHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIERldmljZUluZm8gPSBmdW5jdGlvbiAoKSB7XG5cdFx0ZnVuY3Rpb24gRGV2aWNlSW5mbygpIHtcblx0XHRcdFx0X2NsYXNzQ2FsbENoZWNrKHRoaXMsIERldmljZUluZm8pO1xuXHRcdH1cblxuXHRcdF9jcmVhdGVDbGFzcyhEZXZpY2VJbmZvLCBudWxsLCBbe1xuXHRcdFx0XHRrZXk6IFwiY2hlY2tcIixcblx0XHRcdFx0dmFsdWU6IGZ1bmN0aW9uIGNoZWNrKCkge1xuXG5cdFx0XHRcdFx0XHQvL0ZGXG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc0Nocm9tZSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY2hyb21lXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzU2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJjaHJvbWVcIikgPD0gLTEgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJzYWZhcmlcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcblx0XHRcdFx0XHRcdERldmljZUluZm8uaXNBbmRyb2lkID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJhbmRyb2lkXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XG5cdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbTtcblxuXHRcdFx0XHRcdFx0Ly9JRVxuXHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc0lFID0gRGV2aWNlSW5mby5nZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpICE9IC0xO1xuXG5cdFx0XHRcdFx0XHQvLyBJUyBUT1VDSFxuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRkb2N1bWVudC5jcmVhdGVFdmVudChcIlRvdWNoRXZlbnRcIik7XG5cdFx0XHRcdFx0XHRcdFx0RGV2aWNlSW5mby5pc1RvdWNoID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0XHREZXZpY2VJbmZvLmlzVG91Y2ggPSBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdH0sIHtcblx0XHRcdFx0a2V5OiBcImdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uXCIsXG5cdFx0XHRcdHZhbHVlOiBmdW5jdGlvbiBnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpIHtcblxuXHRcdFx0XHRcdFx0dmFyIHJ2ID0gLTE7XG5cdFx0XHRcdFx0XHR2YXIgcmUgPSBudWxsO1xuXHRcdFx0XHRcdFx0dmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuXHRcdFx0XHRcdFx0aWYgKG5hdmlnYXRvci5hcHBOYW1lID09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRyZSA9IG5ldyBSZWdFeHAoXCJNU0lFIChbMC05XXsxLH1bXFwuMC05XXswLH0pXCIpO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHJlLmV4ZWModWEpICE9PSBudWxsKSBydiA9IHBhcnNlRmxvYXQoUmVnRXhwLiQxKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobmF2aWdhdG9yLmFwcE5hbWUgPT0gJ05ldHNjYXBlJykge1xuXG5cdFx0XHRcdFx0XHRcdFx0cmUgPSBuZXcgUmVnRXhwKFwiVHJpZGVudC8uKnJ2OihbMC05XXsxLH1bXFwuMC05XXswLH0pXCIpO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHJlLmV4ZWModWEpICE9PSBudWxsKSBydiA9IHBhcnNlRmxvYXQoUmVnRXhwLiQxKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmV0dXJuIHJ2O1xuXHRcdFx0XHR9XG5cdFx0fV0pO1xuXG5cdFx0cmV0dXJuIERldmljZUluZm87XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IERldmljZUluZm87XG5cbn0se31dfSx7fSxbMl0pXG5cbiIsImNsYXNzIEhvbWUge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnSG9tZScpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBTY3JvbGxNYWdpYy5Db250cm9sbGVyKCk7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb24oKTtcclxuICAgICAgICB0aGlzLnNsaWRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNsaWRlcigpe1xyXG4gICAgXHQkKFwiI3NsaWRlci1ob21lXCIpLnJlc3BvbnNpdmVTbGlkZXMoe1xyXG4gICAgICAgICAgICBtYW51YWxDb250cm9sczogJyNzbGlkZXItcGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIHRpbWVvdXQ6IDQwMDAsXHJcbiAgICAgICAgICAgIGF1dG86IHRydWUsXHJcbiAgICAgICAgICAgIGJlZm9yZTogZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhbmltYXRpb24oKXtcclxuICAgICAgICB0aGlzLmhvbWVhcmVhICAgID0gbmV3IFRpbWVsaW5lTWF4KCk7XHJcbiAgICAgICAgdGhpcy5ob21ldGl0bGUgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaG9tZS1jb250ZW50IGgyXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuaG9tZWFyZWEuZnJvbVRvKHRoaXMuaG9tZXRpdGxlLCAwLjgsIHsgb3BhY2l0eTogMCwgeTotNDAgfSwgeyBvcGFjaXR5OiAxLCB5OjAgfSwgMC40KTtcclxuICAgICAgIFxyXG4gICAgICAgIGxldCBtYWluID0gbmV3IFNjcm9sbE1hZ2ljLlNjZW5lKHt0cmlnZ2VyRWxlbWVudDogJyNob21lJywgcmV2ZXJzZTogZmFsc2UsfSlcclxuICAgICAgICAuc2V0VHdlZW4odGhpcy5ob21lYXJlYSlcclxuICAgICAgICAuYWRkVG8odGhpcy5jb250cm9sbGVyKTtcclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIb21lOyIsImltcG9ydCBEZXZpY2VJbmZvIGZyb20gJy4uL3Rvb2xzL0RldmljZUluZm8nO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuLi9wYXJ0aWFscy9IZWFkZXInO1xuaW1wb3J0IEZvb3RlciBmcm9tICcuLi9wYXJ0aWFscy9Gb290ZXInO1xuXG5pbXBvcnQgSG9tZSBmcm9tICcuL0hvbWUnO1xuXG5jbGFzcyBNYWluIHtcblxuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2luaXQnKTtcbiAgICAgICAgdGhpcy5yZWFkeSgpO1xuICAgIH1cblxuICAgIHJlYWR5KCkge1xuICAgIFx0RGV2aWNlSW5mby5jaGVjaygpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzVG91Y2gpIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZChcInRvdWNoXCIpO1xuICAgIFx0aWYoRGV2aWNlSW5mby5pc0lFKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJpZVwiKTtcbiAgICBcdGlmKERldmljZUluZm8uaXNBbmRyb2lkKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJhbmRyb2lkXCIpO1xuICAgIFx0aWYoRGV2aWNlSW5mby5pc0lPUykgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaW9zXCIpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzRmlyZWZveCkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiZmlyZWZveFwiKTtcbiAgICAgICAgaWYoRGV2aWNlSW5mby5pc1NhZmFyaSkgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwic2FmYXJpXCIpO1xuICAgICAgICBpZihEZXZpY2VJbmZvLmlzQ2hyb21lKSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJjaHJvbWVcIik7XG4gICAgICAgIC8vIGxldCBwcmVsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJlbG9hZGVyJyk7XG4gICAgICAgIC8vIFR3ZWVuTGl0ZS50byhwcmVsb2FkZXIsIDAuNSx7Y3NzOnthdXRvQWxwaGE6MH0sZGVsYXk6MC40fSk7XG4gICAgICAgIC8vIFR3ZWVuTGl0ZS5zZXQocHJlbG9hZGVyLHtjc3M6e2Rpc3BsYXk6XCJibG9ja1wifSxkZWxheTowLjh9KTtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBuZXcgSGVhZGVyKCk7XG4gICAgICAgIHRoaXMuZm9vdGVyID0gbmV3IEZvb3RlcigpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoKCQoJ2JvZHkgc2VjdGlvbicpLmF0dHIoXCJkYXRhLXRlbXBsYXRlXCIpKXtcbiAgICAgICAgICAgIGNhc2UgXCJob21lXCI6IHRoaXMucGFnZSA9IG5ldyBIb21lKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5cbm5ldyBNYWluKCk7IiwiY2xhc3MgRm9vdGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0Zvb3RlcicpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9vdGVyOyIsImNsYXNzIEhlYWRlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdIZWFkZXInKTtcclxuICAgICAgICB0aGlzLm1lbnVyZXNpemUoKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5tZW51cmVzaXplLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmFjdGl2ZU9uU2Nyb2xsLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuYW5jaG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbSA+IGEnKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYW5jaG9yLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgXHR0aGlzLmFuY2hvcltpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYW5jaG9ySnVtcC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1lbnVyZXNpemUoKXtcclxuICAgICAgICBjb25zdCBzdGFydCA9IDEwMDtcclxuICAgICAgICB0aGlzLm5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXN0aGVhZCcpO1xyXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiBzdGFydCl7IFxyXG4gICAgICAgICAgICB0aGlzLm5hdi5jbGFzc0xpc3QuYWRkKCdzbWFsbCcpOyBcclxuICAgICAgICB9IFxyXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPD0gc3RhcnQpe1xyXG4gICAgICAgICAgICB0aGlzLm5hdi5jbGFzc0xpc3QucmVtb3ZlKCdzbWFsbCcpOyBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYW5jaG9ySnVtcChldmVudCl7XHJcbiAgICBcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAkKGV2ZW50LnRhcmdldC5oYXNoKS5vZmZzZXQoKS50b3B9LCA1MDApO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdGl2ZU9uU2Nyb2xsKCl7XHJcbiAgICAgICAgbGV0IHBvcyA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuICAgICAgICBsZXQgc2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGlkID0gc2VjdGlvbnNbaV0uZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgICAgICBsZXQgc2VjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICAgICAgaWYgKHNlY3QgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlY3Rwb3MgPSAkKHNlY3QpLnBvc2l0aW9uKCkudG9wIC0gMTY4O1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlY3Rwb3MgPD0gcG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhciB1bCBsaS5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhciB1bCBsaS4nK2lkKycnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBIZWFkZXI7IiwiY2xhc3MgRGV2aWNlSW5mbyB7XHJcblxyXG5cdHN0YXRpYyBjaGVjaygpIHtcclxuXHJcblx0XHQvL0ZGXHJcblx0XHREZXZpY2VJbmZvLmlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKSA+IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG5cdFx0RGV2aWNlSW5mby5pc0Nocm9tZSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiY2hyb21lXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XHJcblx0XHREZXZpY2VJbmZvLmlzU2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJjaHJvbWVcIikgPD0gLTEgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJzYWZhcmlcIikgPiAtMSA/IHRydWUgOiBmYWxzZTtcclxuXHRcdERldmljZUluZm8uaXNBbmRyb2lkID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJhbmRyb2lkXCIpID4gLTEgPyB0cnVlIDogZmFsc2U7XHJcblx0XHREZXZpY2VJbmZvLmlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbTtcclxuXHJcblx0XHQvL0lFXHJcblx0XHREZXZpY2VJbmZvLmlzSUUgPSBEZXZpY2VJbmZvLmdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uKCkgIT0gLTE7XHJcblxyXG5cdFx0Ly8gSVMgVE9VQ0hcclxuXHRcdHRyeSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiVG91Y2hFdmVudFwiKTtcclxuICAgICAgICAgICAgRGV2aWNlSW5mby5pc1RvdWNoID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBEZXZpY2VJbmZvLmlzVG91Y2ggPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uICgpIHtcclxuXHJcbiAgICAgIFx0bGV0IHJ2ID0gLTE7XHJcbiAgICAgIFx0bGV0IHJlID0gbnVsbDtcclxuICAgICAgICBjb25zdCB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XHJcblxyXG5cdFx0aWYgKG5hdmlnYXRvci5hcHBOYW1lID09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKVxyXG5cdFx0e1xyXG5cclxuXHRcdFx0cmUgID0gbmV3IFJlZ0V4cChcIk1TSUUgKFswLTldezEsfVtcXC4wLTldezAsfSlcIik7XHJcblxyXG5cdFx0XHRpZiAocmUuZXhlYyh1YSkgIT09IG51bGwpIHJ2ID0gcGFyc2VGbG9hdCggUmVnRXhwLiQxICk7XHJcblxyXG5cdFx0fSBlbHNlIGlmIChuYXZpZ2F0b3IuYXBwTmFtZSA9PSAnTmV0c2NhcGUnKSB7XHJcblxyXG5cdFx0XHRyZSAgPSBuZXcgUmVnRXhwKFwiVHJpZGVudC8uKnJ2OihbMC05XXsxLH1bXFwuMC05XXswLH0pXCIpO1xyXG5cclxuXHRcdFx0aWYgKHJlLmV4ZWModWEpICE9PSBudWxsKSBydiA9IHBhcnNlRmxvYXQoIFJlZ0V4cC4kMSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBydjtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERldmljZUluZm87Il19
